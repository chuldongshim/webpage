<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-sideprj/window/window_realize_f2_Profiling">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">F2 Profiling | Who am I and What should I do next...</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/webpage/docs/sideprj/window/window_realize_f2_Profiling"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="F2 Profiling | Who am I and What should I do next..."><meta data-rh="true" name="description" content="---"><meta data-rh="true" property="og:description" content="---"><link data-rh="true" rel="icon" href="/webpage/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://github.com/webpage/docs/sideprj/window/window_realize_f2_Profiling"><link data-rh="true" rel="alternate" href="https://github.com/webpage/docs/sideprj/window/window_realize_f2_Profiling" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/webpage/docs/sideprj/window/window_realize_f2_Profiling" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/webpage/blog/rss.xml" title="Who am I and What should I do next... RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/webpage/blog/atom.xml" title="Who am I and What should I do next... Atom Feed"><link rel="stylesheet" href="/webpage/assets/css/styles.612a6376.css">
<link rel="preload" href="/webpage/assets/js/runtime~main.9f6d34b8.js" as="script">
<link rel="preload" href="/webpage/assets/js/main.4ce3a792.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/webpage/"><div class="navbar__logo"><img src="/webpage/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/webpage/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">나는 개발자다!</b></a><a class="navbar__item navbar__link" href="/webpage/docs/mycareer">경력요약</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/webpage/docs/sideprj">사이드프로젝트</a><a class="navbar__item navbar__link" href="/webpage/docs/introduce">자기소개</a><a class="navbar__item navbar__link" href="/webpage/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/chuldongshim/webpage/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">MyGitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/webpage/docs/sideprj">사이드프로젝트 리스트</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/webpage/docs/sideprj/mbd">1. MBD를 통한 A-SPICE 준수</a><button aria-label="Toggle the collapsible sidebar category &#x27;1. MBD를 통한 A-SPICE 준수&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/webpage/docs/sideprj/hybrid">2. 임베디드 웹서버OTA</a><button aria-label="Toggle the collapsible sidebar category &#x27;2. 임베디드 웹서버OTA&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/webpage/docs/sideprj/window">3. MBD기반 윈도우</a><button aria-label="Toggle the collapsible sidebar category &#x27;3. MBD기반 윈도우&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/webpage/docs/sideprj/window/window_design">설계</a><button aria-label="Toggle the collapsible sidebar category &#x27;설계&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_design_cencept">개발컨셉</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_design_reqs">요구사항 정의</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_design_architecture">아키텍처 설계</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/webpage/docs/sideprj/window/window_realize">구현</a><button aria-label="Toggle the collapsible sidebar category &#x27;구현&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f0_PlantModeling">플랜트모델링</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f0_VelMeasure">속도측정</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f1_AutoManual">F1 AutoManual</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f2_Profiling">F2 Profiling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f3_FeedbackControl">F3 피드백제어</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f4_Initialize">F4 초기화</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f5_SoftStop">F5 Soft-Stop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f6_AntiPinch">F6 Anti-Pinch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f7_KalmanFilter">F7 칼만필터(TBD)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/webpage/docs/sideprj/window/window_verify">검증</a><button aria-label="Toggle the collapsible sidebar category &#x27;검증&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_verify_autocode_generate">코드자동생성</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_verify_func_test">기능시험</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_verify_traceability">추적성확보</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/webpage/docs/sideprj/wiper">4. MBD기반 와이퍼</a><button aria-label="Toggle the collapsible sidebar category &#x27;4. MBD기반 와이퍼&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/webpage/docs/sideprj/temperature">5. MBD기반 온도PID제어</a><button aria-label="Toggle the collapsible sidebar category &#x27;5. MBD기반 온도PID제어&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/webpage/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/webpage/docs/sideprj/window"><span itemprop="name">3. MBD기반 윈도우</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/webpage/docs/sideprj/window/window_realize"><span itemprop="name">구현</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">F2 Profiling</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>F2 Profiling</h1></header><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="분석">분석<a class="hash-link" href="#분석" title="Direct link to heading">​</a></h2><blockquote><font color="blue"><strong>프로파일링 기능</strong></font><br>모터를 부드럽게 구동시키기 위해 가속/등속/감속 구간으루 나눠 위치(S커브) 및 속도(사다리꼴) 제어입력을 생성하는 기능</blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="구현조건">구현조건<a class="hash-link" href="#구현조건" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="시뮬레이션-환경">시뮬레이션 환경<a class="hash-link" href="#시뮬레이션-환경" title="Direct link to heading">​</a></h3><p>Continuous Transfer Function으로 모델링 된 Plant Model과, MCU실행을 고려하여 일정주기(1ms)마다 Profiling을 수행하는 Discrete Profiling Model이 하나의 시뮬링크 환경에서 수행되어야 하기 때문에 다음과 같이 환경을 설정하고 시뮬레이션을 수행한다.</p><p align="center"><img loading="lazy" src="/webpage/assets/images/mbd_sys_mil_f2_VelProfile_1_solver-37bee76d62c9a937616a2f280a792ff2.png" width="450" alt="Example banner" class="img_ev3q"><br><em>&lt;Simulink Solver Settings&gt;</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="파라미터-정의">파라미터 정의<a class="hash-link" href="#파라미터-정의" title="Direct link to heading">​</a></h3><u>파라미터 확인</u><ul><li>단위환산<ul><li>기어60<!-- -->[rpm]<!-- --> = 기어1<!-- -->[rev/s]<!-- --> = 모터85<!-- -->[rev/s]<!-- --> = 모터680(=85x8)<!-- -->[pulse/s]</li><li>기어1<!-- -->[rpm]<!-- --> = 모터(85*8)/60<!-- -->[pulse/s]<!-- --> = 11.33<!-- -->[pulse/s]</li></ul></li><li>12<!-- -->[V]<!-- -->인가 시 Shaft 최대 속도<ul><li>실험데이터를 통해 <font color="#34a28a">12<!-- -->[V]<!-- -->인가 시 75<!-- -->[rpm]<!-- -->이 출력되므로 최대속도는</font></li><li><font color="#34a28a">75[rpm] = 75x((85*8)/60)[pulse/s] = 850[pulse/s]</font></li></ul></li><li>이동시간 Td, 0.25Td 가속, 0.5Td 등속, 0.75Td 감속<ul><li>속도프로파일에서 면적이 이동거리가 되므로 거리=시간x속도 -&gt; 3000 = 0.75Td*Vmax -&gt; Vmax = 3000/0.75Td</li><li>따라서 3000<!-- -->[pulse]<!-- -->를 1s에 가려면 가/감속이 없는 경우 3000<!-- -->[pulse/s]<!-- -->가 되나, 가/감속이 있는 경우 등속구간이 더 높아야 하므로 Vmax=4000<!-- -->[pulse/s]<!-- -->가 되어야 한다.</li></ul></li><li>2<!-- -->[s]<!-- --> 동안 3000<!-- -->[pulse]<!-- -->를 이동하기 위한 Vmax<ul><li>Vmax = 3000/0.75Td = 3000/(0.75*2) = 2000<!-- -->[pulse/s]</li></ul></li></ul><u>기구부 사양</u><ul><li>Drum Size(지름) : 46.45mm</li><li>기어비 : 1:85</li><li>4극 : 1회전 시 4펄스(rising 2개+falling 2개) -&gt; A/B상이므로 총 8펄스 발생</li><li>1펄스 발생 시 윈도우 이동거리<ul><li>기어 1회전 시 Drum도 1회전 -&gt; 윈도우 145.853<!-- -->[mm]<!-- -->(=pi x 46.45)이동  </li><li>기어 1회전 시 Shaft 85회전 -&gt; 680<!-- -->[pulse]<!-- --> 발생  </li><li>145.853<!-- -->[mm]<!-- -->:680<!-- -->[pulse]<!-- --> = x<!-- -->[mm]<!-- -->:1<!-- -->[pulse]<!-- -->  </li><li>1<!-- -->[pulse]<!-- --> = 145.853/680<!-- -->[mm]<!-- --> ≒ 0.2145<!-- -->[mm]</li></ul></li><li>300mm 이동 시 펄스<ul><li>46.45<!-- -->[mm]<!-- -->:680<!-- -->[pulse]<!-- --> = 300<!-- -->[mm]<!-- -->:x<!-- -->[pulse]<!-- -->  </li><li>x<!-- -->[pulse]<!-- --> = (46.45*3000)/680<!-- -->[pulse]<!-- --> = 4,391.82<!-- -->[pulse]</li><li><font color="#34a28a">따라서 300mm 이동시 발생되는 펄스는 4,391.82[pulse]가 된다.</font></li></ul></li><li>기어60<!-- -->[rpm]<!-- --> 회전 시 300mm 이동 소요시간<ul><li>60rpm인 경우 초당 1회전이므로 1초에 680<!-- -->[pulse]<!-- --> 발생  </li><li>680<!-- -->[pulse]<!-- -->:1<!-- -->[s]<!-- --> = 4,391.82<!-- -->[pulse]<!-- -->:x<!-- -->[s]</li><li>x<!-- -->[s]<!-- --> = 4,391.82/680<!-- -->[s]<!-- --> = 6.458<!-- -->[s]</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="기능구현">기능구현<a class="hash-link" href="#기능구현" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="파라미터-정의-1">파라미터 정의<a class="hash-link" href="#파라미터-정의-1" title="Direct link to heading">​</a></h3><p>프로파일링을 위해서는 다음과 같이 이동거리, 이동시간이 결정되어야 한다. (가/감속 비율은 전체 이동시간 Td 중 0.25Td로 일정하다고 가정)</p><ul><li>4<!-- -->[s]<!-- -->동안 4000<!-- -->[pulse]<!-- --> 이동 시 Vmax<br>&lt;Note10으로 그림 그려서 삽입&gt;<ul><li><code>이동시간 Td=4[s]</code>, <code>0.25Td 가속</code>, <code>0.5Td 등속</code>, <code>0.75Td 감속</code>인 경우</li><li>거리 = 0.75Td x Vmax -&gt; 4000<!-- -->[pulse]<!-- --> = 3<!-- -->[s]<!-- --> x Vmax</li><li><font color="#34a28a">Vmax = 4000/0.75Td [pulse/s]</font></li></ul></li><li>Td<!-- -->[s]<!-- -->동안 4000<!-- -->[pulse]<!-- --> 이동 시 Vmax<ul><li>12<!-- -->[V]<!-- -->인가시 출력속도 850<!-- -->[pulse/s]<!-- -->보다 크면 안됨</li><li>Td=4<!-- -->[s]<!-- --> -&gt; Vmax=4000/(0.75*4)=1,333.33<!-- -->[pulse/s]</li><li>Td=5<!-- -->[s]<!-- --> -&gt; Vmax=4000/(0.75*5)=1,066.67<!-- -->[pulse/s]</li><li>Td=6<!-- -->[s]<!-- --> -&gt; Vmax=4000/(0.75*6)=888.89<!-- -->[pulse/s]</li><li>Td=7<!-- -->[s]<!-- --> -&gt; Vmax=4000/(0.75*7)=761.90<!-- -->[pulse/s]</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="프로파일링-트리거">프로파일링 트리거<a class="hash-link" href="#프로파일링-트리거" title="Direct link to heading">​</a></h3><ul><li>WindowState로직은<ul><li>ProfileTrigger(스위치입력) 발생 시 Opening/Closing 상태로 천이하고, ProfileTrigger신호를 1/-1로 출력한다.</li><li>트리거 발생 후 추가 스위치 조작이 없는 경우 StopTrigger(0<!-- -->[pulse]<!-- --> or 4000<!-- -->[pulse]<!-- --> 도달)가 발생하면 Opened/Closed 상태로 천이하고, ProfileTrigger신호를 0으로 출력한다.</li></ul></li><li>OutputProcessing로직은<ul><li>ProfileTrigger신호가 1/-1인 경우 가속/등속/감속 프로파일링을 수행한다.</li><li>가속/등속 중 스위치 조작으로 ProfileTrigger신호가 0으로 변경되면 정지를 위해 감속프로파일을 수행하고, 감속 중 ProfileTrigger신호가 0으로 변경되면 진행중인 감속프로파일을 계속 수행한다.</li></ul></li></ul><p align="center"><img loading="lazy" src="/webpage/assets/images/mbd_sys_mil_f2_VelProfile_2_profile_trigger-eb29b155d2888dbe96a5bf809eb2cfad.png" width="450" alt="Example banner" class="img_ev3q"><br><em>&lt;WindowState로직(좌) 및 OutputProcessing로직(우)&gt;</em></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="vel-profiling">프로파일링<a class="hash-link" href="#vel-profiling" title="Direct link to heading">​</a></h3><p>속도프로파일은 가속/등속/감속 세구간으로 나눠 직선의 방정식을 vel=f(t)와 같은 수식으로 만들어 각 샘플시간마다 속도를 계산한다. 역방향 프로파일은 정방향 프로파일과 부호만 반대로 계산한다. 수식을 Stateflow를 통해 다음과 같이 구현한다.<br>
<!-- -->속도프로파일을 적분하여 위치프로파일을 생성하고, 미분을 통해 가속도 프로파일을 생성한다.</p><p align="center"><img loading="lazy" src="/webpage/assets/images/mbd_sys_mil_f2_VelProfile_3_vel_profiling-378bc9988dd2eefd1657a31c20fc66ea.png" width="450" alt="Example banner" class="img_ev3q"><br><em>&lt;가속/등속/감속 프로파일링&gt;</em></p><p>프로파일링을 위해서는 이동거리 및 시간, 가/감속 기울기가 파라미터로 입력되어야 하며, 이동거리(4000<!-- -->[pulse]<!-- -->), 이동시간(7s) 및 가/감속 기울기(0.25)가 Constant로 일정하다고 할 때 다음의 경우를 고려하여 이동거리가 계산되어야 한다.</p><ul><li>DOWN<br>③ 0<!-- -->[pulse]<!-- -->에서 M-Dn 입력유지 시 Dn방향(↑) 이동거리=4000<!-- -->[pulse]<br>① 500<!-- -->[pulse]<!-- -->에서 M-Dn 입력유지 시 Dn방향(↑) 이동거리=3500<!-- -->[pulse]<br>② 3500<!-- -->[pulse]<!-- -->에서 M-Dn 입력유지 시 Dn방향(↑) 이동거리=500<!-- -->[pulse]</li><li>Up<br>③ 4000<!-- -->[pulse]<!-- -->에서 M-Up 입력유지 시 Up방향(↓) 이동거리=4000<!-- -->[pulse]<br>① 3500<!-- -->[pulse]<!-- -->에서 M-Up 입력유지 시 Up방향(↓) 이동거리=3500<!-- -->[pulse]<br>② 500<!-- -->[pulse]<!-- -->에서 M-Up 입력유지 시 Up방향(↓) 이동거리=500<!-- -->[pulse]</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="트리거-동기화">트리거 동기화<a class="hash-link" href="#트리거-동기화" title="Direct link to heading">​</a></h3><p><code>Closing-&gt;Closed동작</code>을 예를들면, 윈도우 Plant 특성 상 가속보다 감속에서 지연이 많이 발생하는 이유로, 감속 Profiling은 끝났는데, 지연 때문에 아직 <code>0[pulse]</code>에 도착하지 않았기 때문에 <u>WindowState로직(위치를 기준으로 상태천이 수행)</u>은 Closing상태를 Closed상태로 천이시키지 않고, <code>MovingTragger=-1</code>을 출력한다. OutputProcessing로직은 Profiling완료 후 WindowState로직의 -1 신호로인해 다시 Profiling을 시도하게 되고, 비로소 <code>0[pulse]</code>에 도착하면 WindowState로직은 Closed상태로 천이하여 <code>MovingTragger=0</code>를 출력하고, 이로인해 OutputProcessing로직은 가속 Profiling 도중 Switch Off를 인식하여 감속 Profiling을 진행하여 모터가 멈추게 된다.</p><p align="center"><img loading="lazy" src="/webpage/assets/images/mbd_sys_mil_f2_VelProfile_4_Sync_problem-42d9c98b3c456aee469abdf4dc98e66a.png" width="450" alt="Example banner" class="img_ev3q"><br><em>&lt;모터 구동명령 동기화 문제&gt;</em></p><p>이와 같은 이유로 윈도우 동작을 위한 MovingTrigger신호를 생성하는 WindowState로직과 이를 이용하여 모터 출력을 생성하는 OutputProcessing로직간 동기화가 중요해 진다.</p><p>WindowState로직과 OutputProcessing로직 동기화를 위해 다음과 같이 ProfileTrigger 신호를 이용하여 동기화를 구현한다.</p><p align="center"><img loading="lazy" src="/webpage/assets/images/mbd_sys_mil_f2_VelProfile_5_Sync_solution-1c8c5027ab7268b76fa84cc50e8ab1bf.png" width="450" alt="Example banner" class="img_ev3q"><br><em>&lt;모터 구동명령 동기화 해결방법&gt;</em></p><ol><li>WindowState로직에서<br>: Opening 상태에서 ProfileTrigger=1출력</li><li>OutputProcessing로직에서<br>: Opening 프로파일링 수행 -&gt; 프로파일링 완료 -&gt; ProfileTrigger=0까지 대기</li><li>WindowState로직에서<br>: Opening인 경우 4000<!-- -->[pulse]<!-- --> 도달 시 ProfileTrigger=0출력
: Closing인 경우 0<!-- -->[pulse]<!-- --> 도달 시 ProfileTrigger=0출력</li><li>OutputProcessing로직에서<br>: Selector로 상태를 천이하여 Profiling 완료</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="시뮬레이션">시뮬레이션<a class="hash-link" href="#시뮬레이션" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="속도프로파일을-통한-모터-출력">속도프로파일을 통한 모터 출력<a class="hash-link" href="#속도프로파일을-통한-모터-출력" title="Direct link to heading">​</a></h3><p>위치/속도 피드백제어를 정확하게 수행하면 정의된 시간에 계산된 위치까지 이동하므로
이동위치에 도달할 때 Opening-&gt;Opened or Closing-&gt;Closed로 상태천이를 수행하면 되나,
피드백제어를 수행하지 않을 경우 다음과 같이 Reference위치가 4000에 도달하여 Reference Voltage를 0<!-- -->[V]<!-- -->으로 출력해도, 관성으로 Plant는 여전히 이동하며, 이로인해 위치오차가 발생하게 된다.</p><p align="center"><img loading="lazy" src="/webpage/assets/images/mbd_sys_mil_f2_VelProfile_6_out_without_FbCtrl-761c4ac352750662ef1cbca3519b032c.png" width="450" alt="Example banner" class="img_ev3q"><br><em>&lt;피드백 없는 프로파일 모터 출력&gt;</em></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/chuldongshim/webpage/docs/3_sideprj/3_window/window_realize_f2_Profiling.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/webpage/docs/sideprj/window/window_realize_f1_AutoManual"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">F1 AutoManual</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/webpage/docs/sideprj/window/window_realize_f3_FeedbackControl"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">F3 피드백제어</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#분석" class="table-of-contents__link toc-highlight">분석</a><ul><li><a href="#구현조건" class="table-of-contents__link toc-highlight">구현조건</a></li><li><a href="#시뮬레이션-환경" class="table-of-contents__link toc-highlight">시뮬레이션 환경</a></li><li><a href="#파라미터-정의" class="table-of-contents__link toc-highlight">파라미터 정의</a></li></ul></li><li><a href="#기능구현" class="table-of-contents__link toc-highlight">기능구현</a><ul><li><a href="#파라미터-정의-1" class="table-of-contents__link toc-highlight">파라미터 정의</a></li><li><a href="#프로파일링-트리거" class="table-of-contents__link toc-highlight">프로파일링 트리거</a></li><li><a href="#vel-profiling" class="table-of-contents__link toc-highlight">프로파일링</a></li><li><a href="#트리거-동기화" class="table-of-contents__link toc-highlight">트리거 동기화</a></li></ul></li><li><a href="#시뮬레이션" class="table-of-contents__link toc-highlight">시뮬레이션</a><ul><li><a href="#속도프로파일을-통한-모터-출력" class="table-of-contents__link toc-highlight">속도프로파일을 통한 모터 출력</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/webpage/docs/mycareer">경력요약</a></li><li class="footer__item"><a class="footer__link-item" href="/webpage/docs/introduce">자기소개</a></li><li class="footer__item"><a class="footer__link-item" href="/webpage/docs/sideprj">사이드프로젝트</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/webpage/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/chuldongshim/webpage" target="_blank" rel="noopener noreferrer" class="footer__link-item">MyGitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc.</div></div></div></footer></div>
<script src="/webpage/assets/js/runtime~main.9f6d34b8.js"></script>
<script src="/webpage/assets/js/main.4ce3a792.js"></script>
</body>
</html>