<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-sideprj/hybridprj/esp32">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="alternate" type="application/rss+xml" href="/webpage/blog/rss.xml" title="나는 개발자다! 코딩 인생수양... RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/webpage/blog/atom.xml" title="나는 개발자다! 코딩 인생수양... Atom Feed"><title data-rh="true">ESP32 블루투스 | 나는 개발자다! 코딩 인생수양...</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/webpage/docs/sideprj/hybridprj/esp32"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ESP32 블루투스 | 나는 개발자다! 코딩 인생수양..."><meta data-rh="true" name="description" content="Since 21.08.17 ~"><meta data-rh="true" property="og:description" content="Since 21.08.17 ~"><link data-rh="true" rel="icon" href="/webpage/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/webpage/docs/sideprj/hybridprj/esp32"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/webpage/docs/sideprj/hybridprj/esp32" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/webpage/docs/sideprj/hybridprj/esp32" hreflang="x-default"><link rel="stylesheet" href="/webpage/assets/css/styles.94a9192f.css">
<link rel="preload" href="/webpage/assets/js/runtime~main.64c01107.js" as="script">
<link rel="preload" href="/webpage/assets/js/main.bfa071de.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/webpage/"><div class="navbar__logo"><img src="/webpage/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/webpage/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">나는 개발자다!</b></a><a class="navbar__item navbar__link" href="/webpage/docs/mycareer">주요경험</a><a class="navbar__item navbar__link" href="/webpage/docs/introduce">자기소개</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/webpage/docs/sideprj">사이드프로젝트</a><a class="navbar__item navbar__link" href="/webpage/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/webpage/docs/sideprj">Github 예제 프로젝트</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/webpage/docs/sideprj/temperature/temperature">온도제어 프로젝트</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/webpage/docs/sideprj/wiper/wiper_plan">와이퍼 프로젝트</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/wiper/wiper_plan">계획</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/wiper/wiper_devenv">개발환경구축 및 설계</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/wiper/wiper_verify">검증</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/webpage/docs/sideprj/window/window_design">윈도우 프로젝트</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_design">설계</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f0_PlantModeling">구현</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f0_PlantModeling">플랜트모델링</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f0_VelMeasure">속도측정</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f1_AutoManual">F1 AutoManual</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f2_Profiling">F2 Profiling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f3_FeedbackControl">F3 피드백제어</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f4_Initialize">F4 초기화</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f5_SoftStop">F5 Soft-Stop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f6_AntiPinch">F6 Anti-Pinch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_realize_f7_KalmanFilter">F7 칼만필터(Ing)</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/window/window_verify">검증</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/webpage/docs/sideprj/hybridprj/esp32">하이브리드 프로젝트</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/webpage/docs/sideprj/hybridprj/esp32">ESP32 블루투스</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage/docs/sideprj/hybridprj/linux">임베디드 리눅스</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/webpage/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">하이브리드 프로젝트</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">ESP32 블루투스</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ESP32 블루투스</h1></header><div align="right"><font size="4">Since 21.08.17 ~</font></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="개요">개요<a class="hash-link" href="#개요" title="Direct link to heading">​</a></h2><p>본 문서는 MBD가 적용되지 않는 일반 선행개발 프로젝트를 대상으로 하며, <strong><font color="#34a28a">Embedded Web Server(이하 ews라 함)</font></strong> 프로젝트를 진행하는데 필요한 모든 내용을 정의한 문서이다.<br>
<!-- -->ews는 웹서버를 통해 GUI 기능(신호모니터링출력, 스위치입력 등), 펌웨어 업데이트 기능(FOTA)을 제공한다.</p><ul><li><p>개발 목적</p><ul><li>IOT 제품을 대상으로 하여 관련 기술을 습득하고, 협업을 위한 개발환경을 구축하는데 목적이 있다.</li><li>공유를 목적으로 프로젝트의 모든 내용(요구사항부터 소스코드 및 실행결과까지)을 웹을 통해 확인할 수 있도록 한다.</li><li>기능을 실행하는 데모 시나리오를 정의하고, 테스트를 통과하면 프로젝트를 완료하는 것으로 한다.</li></ul></li><li><p>개발환경  </p><ul><li>GitHub-Docusaurus(문서산출물) 및 GitLab(소스) 환경에서 개발을 진행한다.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="지원">지원<a class="hash-link" href="#지원" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="프로젝트-관리">프로젝트 관리<a class="hash-link" href="#프로젝트-관리" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="일정관리">일정관리<a class="hash-link" href="#일정관리" title="Direct link to heading">​</a></h4><blockquote><p>Gantt View for Github(Chrome Extension)를 통한 WBS일정 관리</p></blockquote><ul><li>프로젝트는 Agile 기반으로 진행하며, 이슈를 최소 활동단위로 정의하고 관리한다.</li><li>프로젝트/마일스톤/실행기간 속성을 적용하여 이슈를 발행하고, GanttViewer Chrome Extension을 통해 일정을 관리한다.<br><a href="https://github.com/chuldongshim/webpage/issues/7" target="_blank" rel="noopener noreferrer">(Issue_#7 gantt차트를 통한 일정관리 참고)</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="이슈관리">이슈관리<a class="hash-link" href="#이슈관리" title="Direct link to heading">​</a></h4><blockquote><p>GitHub -&gt; WBS일정 관리를 위한 이슈<br>
<!-- -->GitLab -&gt; 프로젝트 진행을 위한 이슈  </p><p>Gitlab을 소스 저장소로 사용하므로 프로젝트 진행(소스개발) 중 발생되는 이슈는 Gitlab을 통해 등록/해결/관리하며, Github에서는 WBS를 위한 이슈로만 사용한다.</p></blockquote><ul><li>GitHub(Open Project로 공개) 또는 GitLab(Private Project로 배공개)에서 프로젝트를 생성하여 이슈를 관리한다.</li><li><font color="red"><strong>이슈 Link를 통해 Docusaurus 산출물과 이슈를 연결하여 관리한다.</strong></font><br>-&gt; 이 내용 이슈로 등록해서 이슈해결할 것</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="형상관리">형상관리<a class="hash-link" href="#형상관리" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="형상관리-방법">형상관리 방법<a class="hash-link" href="#형상관리-방법" title="Direct link to heading">​</a></h5><blockquote><p><a href="https://github.com/chuldongshim/webpage/tree/main/static/assets" target="_blank" rel="noopener noreferrer">Github Repository를 통한 형상관리</a></p></blockquote><ul><li>프로젝트 진행 중 생성되는 모든 산출물은 Github/Gitlab Repository에만 저장한다.<ul><li>Github Docusaurus를 통해 문서화(사양서, 제품 사용자 매뉴얼, 유지보수 매뉴얼 등) 작업을 진행하고, 필요 시 Docusaurus를 pdf로 문서를 추출하여 공유한다.</li><li>Gitlab을 통해 프로젝트 진행 중 생성되는 산출물(버전별 소스코드, 이슈관리 등)을 저장/관리한다.</li></ul></li><li>Gitlab에서 기능별로 폴더를 생성하며 각 폴더에는 요구사항(slreqx), 기능사양(mlx, slx), 자동생성코드(.c, .h), 기능검증(slx) 산출물을 저장/관리하고, 기능통합이 완료되면 전 기능을 포함하는 시스템 폴더를 새로 생성하여 산출물을 저장/관리한다.<br>&lt;- 좀 더 효율적인 방안 추가 검토해 볼 것</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="문서추출">문서추출<a class="hash-link" href="#문서추출" title="Direct link to heading">​</a></h5><p>실패 : <a href="https://github.com/KohheePeace/docusaurus-pdf" target="_blank" rel="noopener noreferrer">https://github.com/KohheePeace/docusaurus-pdf</a><br>
<!-- -->성공 : <a href="https://github.com/kohheepeace/mr-pdf" target="_blank" rel="noopener noreferrer">https://github.com/kohheepeace/mr-pdf</a> (21.11.04)</p><p>local에서 문서 추출 시 인터넷을 연결한 상태에서 로컬에서 docusaurus를 실행하고 있는 상태에서 문서를 추출해야 함. (web도 마찬가지임)</p><p>명령창을 새로 열어 <code>c:\Users\User\workspace_github\webpage</code>로 이동 후 다음 명령을 실행하며, 로컬에서 문서 추출은 중간 이후부터 이미지 안나옴</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npx mr-pdf --initialDocURLs=&quot;http://localhost:3000/webpage/docs/mbd&quot; --contentSelector=&quot;article&quot; --paginationSelector=&quot;.pagination-nav__item--next &gt; a&quot; --excludeSelectors=&quot;.margin-vert--xl a&quot; --coverImage=&quot;https://chuldongshim.github.io/webpage/img/firstpage_motor_pos_control.png&quot; --coverTitle=&quot;Model Based Design&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>웹에서 문서 추출은 비교적 이미지 잘 나오나, 몇몇 짤린 이미지 있음, 인터넷 연결 상태에서 이미지 클릭 시 web link로 연결해서 이미지 확인할 수 있음</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npx mr-pdf --initialDocURLs=&quot;https://chuldongshim.github.io/webpage/docs/mbd&quot; --contentSelector=&quot;article&quot; --paginationSelector=&quot;.pagination-nav__item--next &gt; a&quot; --excludeSelectors=&quot;.margin-vert--xl a&quot; --coverImage=&quot;https://chuldongshim.github.io/webpage/img/firstpage_motor_pos_control.png&quot; --coverTitle=&quot;Model Based Design&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>excludeSelectors를 포함하여 웹에서 문서추출</li></ul><p><img loading="lazy" src="https://user-images.githubusercontent.com/29557494/90359040-c8fb9780-e092-11ea-89c7-1868bc32919f.png" alt="excludeSelectors items" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="publicprivate-설정을-통한-문서공유"><a href="https://ndb796.tistory.com/427" target="_blank" rel="noopener noreferrer">public/private 설정을 통한 문서공유</a><a class="hash-link" href="#publicprivate-설정을-통한-문서공유" title="Direct link to heading">​</a></h5><ul><li>공유 시<br>github를 public에서 private으로 변경하면 외부에서 접근이 불가능함.</li><li>공유해제 시<br>github를 private에서 public으로 다시 변경하면 외부에서 접근이 가능함.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="개발단계">개발단계<a class="hash-link" href="#개발단계" title="Direct link to heading">​</a></h4><p>개발은 3단계를 통해 진행한다.  </p><table><thead><tr><th>단계</th><th>Task</th></tr></thead><tbody><tr><td>시스템</td><td><li>기능/비기능 요구사항 정의</li><li>컨셉설계 및 분석</li><li>HW-SW인터페이스 설계</li></td></tr><tr><td>하드웨어</td><td><li>HW설계</li><li>Firmware</li><li>OS (필요시)</li></td></tr><tr><td>소프트웨어</td><td><li>하드웨어 독립적인 Logic &amp; Algorithm</li><li>Simulink Function Block Model</li></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="참고자료">참고자료<a class="hash-link" href="#참고자료" title="Direct link to heading">​</a></h4><ul><li>OneDrive에서 Offilce 이외의 파일에 메모추가<br>google -&gt; <code>onedrive memo</code>키워드 검색 -&gt; OneDrive에서 Offilce 이외의 파일에 메모추가 확인</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="개발환경">개발환경<a class="hash-link" href="#개발환경" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="background">Background<a class="hash-link" href="#background" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="예제소스">예제소스<a class="hash-link" href="#예제소스" title="Direct link to heading">​</a></h5><p>ESP-IDF는 FreeRTOS kernel과 주변기능(device driver, network stack, security, etc...)을 하나로 통합하여 ESP Seriese 보드에 맞게 최적화 시킨 SDK를 말한다.
Espressif에서는 FreeRTOS를 그대로 사용하지 않고 자신들의 CPU에 맞게 최적화(예: dual core CPU 상황을 고려하여 API 기능 확장)하여 <a href="https://github.com/espressif/esp-idf" target="_blank" rel="noopener noreferrer">github를 통해 배포</a>하고 있다.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>ESP-IDF는 FreeRTOS포함하며, ESP-IDF eclipse에서 예제프로젝트 생성 시 ESP-IDF SDK에 있는 project를 가져옴</p></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="ide">IDE<a class="hash-link" href="#ide" title="Direct link to heading">​</a></h5><p>ESP32 개발환경은 Arduino IDE(쉽게 사용이 가능함)를 이용하는 방법과 <a href="https://blog.naver.com/chcbaram/222201330177" target="_blank" rel="noopener noreferrer">ESP-IDF SDK(전문적인 설정과 사용이 가능함)</a>를 사용하는 방법이 있다.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="교육자료">교육자료<a class="hash-link" href="#교육자료" title="Direct link to heading">​</a></h5><ul><li><a href="https://www.g.camp/search/esp32" target="_blank" rel="noopener noreferrer">G-캠프 교육자료</a><ul><li><a href="https://github.com/gcamp-hub/ESP32-beginner" target="_blank" rel="noopener noreferrer">ESP32 초급과정 pdf 교육자료</a></li><li><a href="https://github.com/gcamp-hub/ESP32_Middle_Class" target="_blank" rel="noopener noreferrer">ESP32 중급과정 pdf 교육자료</a></li></ul></li><li><a href="https://www.youtube.com/c/WizcenterSeoul/search?query=esp32" target="_blank" rel="noopener noreferrer">G-캠프 교육 동영상</a><ul><li><a href="https://www.youtube.com/watch?v=xhSXpPV11E4" target="_blank" rel="noopener noreferrer">ESP32 초급 1일차</a></li><li><a href="https://www.youtube.com/watch?v=mdoZqCX9oNA" target="_blank" rel="noopener noreferrer">ESP32 초급 2일차</a></li><li><a href="https://www.youtube.com/watch?v=_Xmc0mddPqw" target="_blank" rel="noopener noreferrer">ESP32 초급 3일차</a></li><li><a href="https://www.youtube.com/watch?v=7cK0aFWThRc" target="_blank" rel="noopener noreferrer">ESP32 온라인 워크숍 중급과정 1강</a> - wifi</li><li><a href="https://www.youtube.com/watch?v=JZbcwAwdwyw" target="_blank" rel="noopener noreferrer">ESP32 온라인 워크숍 중급과정 2강</a> - BLE</li><li><a href="https://www.youtube.com/watch?v=MbEe1b7lhqA" target="_blank" rel="noopener noreferrer">ESP32 온라인 워크숍 중급과정 3강</a> - wifi+BLE</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="esp-idf-용-eclipse-설치">ESP-IDF 용 eclipse 설치<a class="hash-link" href="#esp-idf-용-eclipse-설치" title="Direct link to heading">​</a></h4><p>본 문서에서는 <code>ESP-IDF eclipse</code> 설치 및 빌드/다운로딩/동작확인 과정을 설명한다.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="eclipse-설치">eclipse 설치<a class="hash-link" href="#eclipse-설치" title="Direct link to heading">​</a></h5><p><code>ESP-IDF eclipse</code>는 <code>%userprofile%\esp</code>를 설치 위치로 사용하며, 설치위치는 명령창에서 다음 명령으로 확인할 수 있다.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&gt; echo %UserProfile%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">C:\Users\cdshim</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>여기서는 필요한 모든 도구를 자동으로 설치해 주는 <a href="https://github.com/espressif/idf-installer#esp-idf-tools-installer-for-windows" target="_blank" rel="noopener noreferrer">Windows용 ESP-IDF 도구 통합 설치 프로그램 (<code>esp-idf-tools-setup-offline-2.10.exe</code> - 2021-08-10 offline download)</a>을 통해 설치를 진행한다.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>ESP-IDF eclipse를 설치하면 다음의 절차들이 자동으로 모두 수행된다.</h5></div><div class="admonition-content"><ul><li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/get-started/index.html#" target="_blank" rel="noopener noreferrer">ESP32 Get Started</a></li><li><a href="https://github.com/espressif/idf-eclipse-plugin#installing-idf-plugin-using-update-site-url" target="_blank" rel="noopener noreferrer">이클립스에서 플러그인 설치 후 빌드/다운로드</a></li><li><a href="https://github.com/espressif/esp-idf" target="_blank" rel="noopener noreferrer">ESP-IDF SDK 다운로드</a></li></ul></div></div><p>다음과 같이 Off-line mode로 설치파일 <code>esp-idf-tools-setup-offline-2.10.exe</code>를 다운로드 하고, 더블클릭하여 디폴트로 설치를 진행한다(단 경로는 아래와 같이 변경).<br>
<img loading="lazy" src="/webpage/assets/images/esp_sup_env_01-b756e0c7cf964fa7cbd6608712c0150e.png" width="597" height="465" class="img_ev3q"></p><p>설치가 완료되면 <code>Run ESP-IDF Eclipse Environment</code>를 체크하고 Finish 버튼을 눌러 설치를 종료한다.<br>
<img loading="lazy" src="/webpage/assets/images/esp_sup_env_02-86851a5f7291ceaf257ea847f844bf64.png" width="599" height="461" class="img_ev3q"></p><p>이후 이클립스가 자동으로 실행되는데, workspace를 <code>C:\Users\cdshim\esp\esp-idf</code>로 설정하여 이클립스를 실행한다.<br>
<img loading="lazy" src="/webpage/assets/images/esp_sup_env_03-ecac596125c80604ecc4ea9acabf4b7a.png" width="617" height="281" class="img_ev3q">
<img loading="lazy" src="/webpage/assets/images/esp_sup_env_04-976b3e2b7b9cf4a96b0521c543d0e229.png" width="579" height="464" class="img_ev3q"></p><p>나중에 ESP-IDF를 재시작하려면...</p><ul><li>바탕화면에 생성되는 &quot;ESP-IDF Eclipse&quot; 아이콘 실행</li><li>C:\Users\cdshim<!-- -->.<!-- -->espressif\tools\idf-eclipse\2021-07\eclipse.exe 실행</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="plug-in-설치">plug-in 설치<a class="hash-link" href="#plug-in-설치" title="Direct link to heading">​</a></h5><p>ESP-IDF eclipse를 설치하면 esp-idf plug-in이 자동으로 설치되며, Eclipse Marketplace -&gt; Search -&gt; idf 검색을 통해 ESP-IDF Eclipse plug-in이 이미 installed 된 것을 확인할 수 있다.
그리고 ESP32 C/C++ Development Tools가 설치되어 있어야 ESP-IDF Tool가 정상적으로 설치되므로 설치되지 않았으면 ESP32 C/C++ Development Tools를 설치한다.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="esp-idf-tools-설치">ESP-IDF Tools 설치<a class="hash-link" href="#esp-idf-tools-설치" title="Direct link to heading">​</a></h5><p>ESP-IDF Tool 설치를 진행하지 않은 상태에서 eclipse에서 Expressif IDF Project를 생성하거나 Workspace를 변경한 상태에서 ESP-IDF Tool을 다시 설치하지 않으면 다음과 같은 Path Error가 발생하므로 ESP-IDF 툴 설치를 진행해야 한다.</p><p><img loading="lazy" src="/webpage/assets/images/esp_sup_env_07-c43805fa9b178d3eca16dddb72a50a87.png" width="517" height="214" class="img_ev3q"></p><p><code>Help -&gt; ESP-IDF Tools Manager -&gt; Install Tools</code>를 선택하여 다이얼로그를 열고 git실행파일이 위치하는 경로를 Git Executable Location으로 입력하고 ESP-IDF 툴 설치를 진행한다. (ES_-IDF Directory, Choose Python version은 자동으로 인식 됨)</p><ul><li><a href="https://github.com/espressif/idf-eclipse-plugin#Prerequisites" target="_blank" rel="noopener noreferrer">업데이트 사이트 URL을 사용하여 eclipse에 IDF 플러그인 설치</a></li><li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32s2/get-started/windows-setup.html" target="_blank" rel="noopener noreferrer">ESP-IDF 도구 설치 프로그램</a></li></ul><p><img loading="lazy" src="/webpage/assets/images/esp_sup_env_05-d84eeaf7ed8152e894e23193f468ae59.png" width="541" height="273" class="img_ev3q"></p><p>설치 완료 후 프로젝트가 정상적으로 생성/빌드되는지 확인한다. (재부팅 필요 없음)
<img loading="lazy" src="/webpage/assets/images/esp_sup_env_06-3c32958ca26100e92bbc66fab89168f2.png" width="747" height="214" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="기타-설치">기타 설치<a class="hash-link" href="#기타-설치" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="usb-driver-설치">usb driver 설치<a class="hash-link" href="#usb-driver-설치" title="Direct link to heading">​</a></h5><p>ESP32 EVB보드는 <a href="https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&amp;blogId=solsol8711&amp;logNo=172613469" target="_blank" rel="noopener noreferrer">CP2192 드라이버를 통해 usb to serial converting을 수행</a>한다.
프로그램 설치 완료 후 ESP32를 PC와 연결하면 자동으로 usb to serial 장치를 검색하는데, 드라이버가 설치되지 않으면 장치를 인식할 수 없으므로 드라이버를 설치하여 장치인식을 확인한다.<br>
<img loading="lazy" src="data:image/png;base64,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" width="464" height="79" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="debugger-설치">Debugger 설치<a class="hash-link" href="#debugger-설치" title="Direct link to heading">​</a></h5><p>ESP32은 다음과 같이 JTAG or UART를 통해 디버깅을 수행할 수 있고, JTAG이 없으므로 UART printf를 통해서만 디버깅을 진행한다.</p><ul><li>UART는 EVB보드에 내장되어 있는 CP2102N 칩(USB-UART)을 이용하여 가상 USB를 통해 모니터링이 가능하다.</li><li>디버깅은 JTAG 장비가 있어야 가능하며, <font color="blue"><u>ESP32-WROOM-32D는 JTAG adapter는 없고 usb-uart interface만 embed 되어 있다.</u></font><br><a href="https://github.com/espressif/idf-eclipse-plugin/blob/master/docs/OpenOCD%20Debugging.md" target="_blank" rel="noopener noreferrer">ESP-IDF GDB OpenOCD Debugging</a> 또는 <a href="https://docs.platformio.org/en/latest/boards/espressif32/esp-wrover-kit.html#debugging" target="_blank" rel="noopener noreferrer">ESP-WROVER-KIT(on-board debuger 내장)</a> 참조
<img loading="lazy" src="/webpage/assets/images/esp_sup_env_OpenOCD_over_JTAG-11e0ee5f4c18e7177bedb7b9a88dc49d.png" width="870" height="453" class="img_ev3q"></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="hello-esp32">Hello ESP32<a class="hash-link" href="#hello-esp32" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="이클립스-프로젝트-생성">이클립스 프로젝트 생성<a class="hash-link" href="#이클립스-프로젝트-생성" title="Direct link to heading">​</a></h5><p>동작확인을 위해 Espressif IDF에서 제공하는 기본 예제 Project를 생성한다. Espressif IDF Project -&gt; 디폴트경로, 프로젝트 이름을 정의 후 Next -&gt; 예제 프로젝트를 생성할 수 있는 Template가 나타난다.<br>
<img loading="lazy" src="/webpage/assets/images/esp_sup_env_09-edaf6659c24196c957a44bdf4ae3ae1d.png" width="714" height="156" class="img_ev3q"></p><p>여기서는 Blink Example 선택 후 Finish 버튼을 누른다.<br>
<img loading="lazy" src="/webpage/assets/images/esp_sup_env_10-0c34136851d494353cbc102c235c9a13.png" width="513" height="314" class="img_ev3q"></p><p>타겟을 esp32로 설정하고<br>
<img loading="lazy" src="/webpage/assets/images/esp_sup_env_11-934f693c53a2a1f9b0e7b588546f752e.png" width="770" height="210" class="img_ev3q"></p><p>장치관리자에서 인식한 시리얼포트로 포트번호를 설정한다.<br>
<img loading="lazy" src="/webpage/assets/images/esp_sup_env_12-5f0465f84e20fe80c254b14e00950cff.png" width="510" height="290" class="img_ev3q"></p><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>예제 프로젝트를 불러오지 못하는 경우 환경변수가 인식되지 않아서 그런 것 같으므로 다음과 같이 ESP-IDF를 재설치 해준다.
Help -&gt; Download and Configure ESP-IDF -&gt; Check &quot;Use an existing ESP-IDF directory from file system&quot; -&gt; Browse -&gt; &quot;C:\Users\User\esp\esp-idf&quot; -&gt; Finish</p></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="이클립스-빌드다운로드터미널모니터">이클립스 빌드/다운로드/터미널모니터<a class="hash-link" href="#이클립스-빌드다운로드터미널모니터" title="Direct link to heading">​</a></h5><p>빌드버튼을 눌러 프로젝트를 빌드한다.(처음 빌드 시 빌드시간 오래 걸림) 에러 없이 빌드가 완료되면 <code>sdkconfig.defaults</code>파일이 <code>sdkconfig파일</code>(콘솔 idf.py menuconfig를 통해서 설정할 수 있는 프로젝트 설정파일로 ESP-IDF eclipse에서 sdkconfig파일 더블클릭하여 설정이 가능함)로 변경된다.<br>
<img loading="lazy" src="/webpage/assets/images/esp_sup_env_13-2b813ef364dfd2c30a5579eba42c76b5.png" width="337" height="136" class="img_ev3q"></p><p>테라텀 연결 해제 후(시리얼을 통해 업데이트 하는 것으로 보임) RUN버튼을 눌러 다운로드를 진행한다.<br>
<img loading="lazy" src="/webpage/assets/images/esp_sup_env_14-61d02be9f212c86d9a9a66d0623256cb.png" width="335" height="166" class="img_ev3q"></p><p>다운로드가 완료되면 테라텀(115200bps)을 연결하여 printf메시지 출력을 확인하거나
<img loading="lazy" src="data:image/png;base64,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" width="345" height="213" class="img_ev3q"></p><p>ESP-IDF에서 제공하는 Serial Monitor를 통해 메시지 출력을 확인한다.<br>
<!-- -->Window탭 -&gt; Show View -&gt; Terminal -&gt; 시리얼 통신 설정 후 연결/확인</p><p align="center"><img loading="lazy" src="/webpage/assets/images/esp_sup_env_16_terminal-503b5bf5931d02b67ed278ef85560730.png" alt="Example banner" width="350" class="img_ev3q"></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="콘솔-빌드다운로드">콘솔 빌드/다운로드<a class="hash-link" href="#콘솔-빌드다운로드" title="Direct link to heading">​</a></h5><p>ESP-IDF 설치 시 함께 설치되는 <code>ESP-IDF 4.3 CMD</code> 터미널(ESP32 빌드를 위한 환경변수가 적용됨) <a href="https://blog.naver.com/PostView.naver?blogId=kim1417&amp;logNo=222262511133&amp;parentCategoryNo=&amp;categoryNo=76&amp;viewDate=&amp;isShowPopularPosts=false&amp;from=postView" target="_blank" rel="noopener noreferrer">명령을 통해 빌드/다운로드</a>가 가능하다. (21.09.17 확인완)</p><ol><li>ESP-IDF 4.3 CMD(터미널) 실행 후 프로젝트 폴더로 이동</li><li>menuconfig<br>&gt;<!-- --> idf.py menuconfig</li><li>build<br>&gt;<!-- --> idf.py build</li><li>flash download<br>하이퍼터미널 시리얼포트 연결 해제<br>&gt;<!-- --> idf.py -p COM8 -b 115200 flash</li><li>콘솔 확인<br>하이퍼터미널을 통해 시리얼 연결 후 printf 확인</li></ol><h5 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshout">Troubleshout<a class="hash-link" href="#troubleshout" title="Direct link to heading">​</a></h5><ul><li><a href="https://www.esp32.com/viewtopic.php?t=14651" target="_blank" rel="noopener noreferrer">빌드 중 ccache 오류- 경로길이로 인한 빌드에러</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="hello-phtyon">Hello phtyon<a class="hash-link" href="#hello-phtyon" title="Direct link to heading">​</a></h4><p><a href="https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&amp;blogId=opusk&amp;logNo=220984663685" target="_blank" rel="noopener noreferrer">참고자료</a></p><ul><li>python은 3.9버전으로 기존에 설치되어 있는 상태</li><li>이클립스에서 python 사용을 위해 PyDev 플러그인 설치</li><li>eclipse -&gt; window -&gt; preferences -&gt; PyDev -&gt; Interpreters -&gt; Python interpreters -&gt; New -&gt; python.exe가 있는 폴더를 찾아서 선택 -&gt; 적용 후 Close</li><li>프로젝트 생성 후 print 확인</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="esp32-아두이노-ide">ESP32 아두이노 IDE<a class="hash-link" href="#esp32-아두이노-ide" title="Direct link to heading">​</a></h4><p>미적용, 21.08.23</p><ul><li><a href="https://www.bneware.com/blogPost/esp32_arduino_ide" target="_blank" rel="noopener noreferrer">ESP32 아두이노 IDE 에서 사용하기</a></li><li><a href="https://www.arduino.cc/en/software" target="_blank" rel="noopener noreferrer">Arduino IDE download</a></li><li><a href="https://fermium.tistory.com/1200" target="_blank" rel="noopener noreferrer">ESP32-DevKitC-32D - LED Blinking 도입</a></li><li><a href="https://fermium.tistory.com/1201" target="_blank" rel="noopener noreferrer">ESP32-DevKitC-32D - TCP/IP</a></li><li><a href="https://eduino.kr/product/detail.html?product_no=611" target="_blank" rel="noopener noreferrer">아두이노 IDE를 통한 블루투스 통신 예제</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="코딩룰">코딩룰<a class="hash-link" href="#코딩룰" title="Direct link to heading">​</a></h3><h5 class="anchor anchorWithStickyNavbar_LWe7" id="변수정의">변수정의<a class="hash-link" href="#변수정의" title="Direct link to heading">​</a></h5><ul><li>변수는 prefix 이후 처음 글자를 소문자로 시작한다.</li><li>모든 변수는 데이터 size를 알 수 있는 prefix를 붙이다.  </li><li>로컬변수에는 prefix가 붙지 않고, 전역변수는 g_ prefix가 붙는다.</li><li>객체 내부에서 사용되는 변수는 static을 통해 C파일에 정의한다.</li><li>객체 외부에서 사용되는 변수는 getFunc() or setFunc() 등과 같이 함수 호출을 통해 사용한다.<ul><li>get/set 함수만 확인하면 객체 외부에서 어떤 변수들이 사용하는지 확인할 수 있는 장점이 있음</li><li>get/set 함수에서 사용되는 변수가 외부와 의존성있는 변수가 됨</li><li>get/set 함수가 없는 경우 독립적으로 사용할 수 있는 객체임</li></ul></li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">float               : float임을 나타내는 f_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uint32_t or int32_t : word임을 나타내는 w_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uint16_t or int16_t : int임을 나타내는 i_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uint8_t or int8_t   : byte임을 나타내는 b_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ex)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gw_ADC_Data : 객체 내부에서 사용되는 32bit 형 전역변수 데이터</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="함수정의">함수정의<a class="hash-link" href="#함수정의" title="Direct link to heading">​</a></h5><ul><li>함수는 prefix 이후 처음 글자를 대문자로 시작한다.</li><li>파일명을 객체로 정의하고, 함수명 이전에 prefix로 파일명이 붙는다.
Motor_OutputCtrl()	: motor.c파일의 출력제어 함수</li><li>C파일 내부에서만 사용되는 함수는 header file에 function prototype을 정의하지 않으며, 함수명 앞에 static 키워드를 붙여 외부에서 호출할 경우 컴파일 에러가 발생하게 하여 C파일 내에서만 사용될 수 있도록 한다.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="참고자료-1">참고자료<a class="hash-link" href="#참고자료-1" title="Direct link to heading">​</a></h5><ul><li><a href="https://hubbleconstant.tistory.com/7" target="_blank" rel="noopener noreferrer">소스 코드 주석 다는 법 예</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="시스템">시스템<a class="hash-link" href="#시스템" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="요구사항">요구사항<a class="hash-link" href="#요구사항" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="기능-요구사항">기능 요구사항<a class="hash-link" href="#기능-요구사항" title="Direct link to heading">​</a></h3><p>선행이므로 비기능/인터페이스 요구사항은 고려하지 않고, 기능 요구사항만을 고려한다.</p><ul><li><a href="/webpage/docs/sideprj/hybridprj/">F1 무선통신기능</a><ul><li><code>F1_Req1</code> 근거리(블루투스) 제어를 제공해야 한다.</li><li><code>F1_Req2</code> 원거리(와이파이) 제어를 제공해야 한다.</li><li><code>F1_Req3</code> CAN_to_Wifi를 제공하여 CAN통신만 존재하는 장비와 인터페이스를 제공해야 한다.<br><a href="https://upcommons.upc.edu/bitstream/handle/2117/118541/report-tfm-eduard-valentino.pdf" target="_blank" rel="noopener noreferrer">(Development of a CAN-Wifi converter based on a ESP32.pdf)</a></li></ul></li><li><a href="/webpage/docs/sideprj/hybridprj/">F2 무선업데이트기능</a><ul><li><code>F2_Req1</code> 제어기 펌웨어를 무선으로 업데이트 해야 한다.</li><li><code>F2_Req2</code> 통신불가 상황을 고려하여 업데이트가 진행되어야 한다.</li><li><code>F2_Req3</code> 허가된 사용자만 업데이트를 수행할 수 있어야 한다.</li></ul></li><li><a href="/webpage/docs/sideprj/hybridprj/">F3 모니터링기능</a><ul><li><code>F3_Req1</code> 펌웨어 업데이트, Signal Monitoring을 위한 웹GUI를 제공해야 한다.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="아키텍처">아키텍처<a class="hash-link" href="#아키텍처" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="개발컨셉">개발컨셉<a class="hash-link" href="#개발컨셉" title="Direct link to heading">​</a></h4><p>본 프로젝트는 앞으로 진행 될 모든 IOT 제품에 동일하게 적용할 수 있는 표준 플랫폼을 개발하는데 목적이 있다.</p><ul><li>IOT 관련 제품(not applicable for automotive)을 개발할 경우 C++ &amp; MBed OS를 표준플랫픔으로 하여 개발을 진행한다.</li><li>Rhapsody에서 Class Diagram을 통해 아키텍처를 설계하고, C++기반으로 Code Skeleton을 생성하여 MBD OS와 Merge 한다.</li><li>휴대휴앱과 블루투스 연결을 통해 원격 스위치 입력 역할 수행 -&gt; 태블릿으로 화면 크게 적용</li><li>휴대폰을 통해 OTA 기능 구현</li><li>휴댜폰 없이 LCD를 통해 직접 스위치 역할도 수행</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="아키텍처-1">아키텍처<a class="hash-link" href="#아키텍처-1" title="Direct link to heading">​</a></h4><ul><li>Physical Architecture<ul><li>하드웨어 의존적인 부분인 PWS 및 MCU Peripherals 영역을 Physical로 분류한다.</li><li>모듈로 언급되는 시스템 구성요소는 하드웨어 자체를 의미한다.</li></ul></li><li>Logical Architecture<ul><li>로직으로 언급되는 시스템 구성요소는 모델을 통한 시뮬레이션을 이용하여 하드웨어 독립적으로 개발이 가능함을 의미한다.</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="참고자료-2">참고자료<a class="hash-link" href="#참고자료-2" title="Direct link to heading">​</a></h4><ul><li><a href="https://chocoball.tistory.com/entry/Hardware-ESP32-Dual-core?category=729036" target="_blank" rel="noopener noreferrer">ESP32의 Dual core 확인해 보기</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="f1-무선통신">F1 무선통신<a class="hash-link" href="#f1-무선통신" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="관련-요구사항">관련 요구사항<a class="hash-link" href="#관련-요구사항" title="Direct link to heading">​</a></h4><ul><li><code>F1_Req1</code> 근거리(블루투스) 제어를 제공해야 한다.</li><li><code>F1_Req2</code> 원거리(와이파이) 제어를 제공해야 한다.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="참고자료-3">참고자료<a class="hash-link" href="#참고자료-3" title="Direct link to heading">​</a></h4><ul><li>ESP32 온라인 워크숍<ul><li><a href="https://github.com/gcamp-hub/ESP32_Middle_Class" target="_blank" rel="noopener noreferrer">GitHub 소스</a></li><li>1일차<ul><li><a href="https://github.com/gcamp-hub/ESP32_Middle_Class/blob/master/ESP32_%EC%A4%91%EA%B8%89%EA%B3%BC%EC%A0%951.pdf" target="_blank" rel="noopener noreferrer">ESP32 Peripherals 과정 리뷰 및 Network 과정 소개 - 자료</a></li><li><a href="https://www.g.camp/1662" target="_blank" rel="noopener noreferrer">온라인 동영상 교육</a></li></ul></li><li>2일차<ul><li><a href="https://github.com/gcamp-hub/ESP32_Middle_Class/blob/master/ESP32_%EC%A4%91%EA%B8%89%EA%B3%BC%EC%A0%952.pdf" target="_blank" rel="noopener noreferrer">lwip+wifi 리뷰 - 자료</a></li><li><a href="https://www.g.camp/1663?category=816908" target="_blank" rel="noopener noreferrer">온라인 동영상 교육</a></li></ul></li><li>3일차<ul><li><a href="https://github.com/gcamp-hub/ESP32_Middle_Class/blob/master/ESP32_%EC%A4%91%EA%B8%89%EA%B3%BC%EC%A0%953.pdf" target="_blank" rel="noopener noreferrer">BLE+WIFI 통합 - 자료</a></li><li><a href="https://www.g.camp/1664?category=816908" target="_blank" rel="noopener noreferrer">온라인 동영상 교육</a></li></ul></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="f2-무선업데이트">F2 무선업데이트<a class="hash-link" href="#f2-무선업데이트" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="관련-요구사항-1">관련 요구사항<a class="hash-link" href="#관련-요구사항-1" title="Direct link to heading">​</a></h4><ul><li>[FID_02]<!-- --> 제어기 펌웨어를 무선으로 업데이트 해야 한다.<ul><li>통신불가 상황을 고려하여 업데이트가 진행되어야 한다.</li><li>허가된 사용자만 업데이트를 수행할 수 있어야 한다.</li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="참고자료-4">참고자료<a class="hash-link" href="#참고자료-4" title="Direct link to heading">​</a></h4><ul><li><a href="https://docs.espressif.com/projects/esp-idf/en/stable/security/secure-boot-v1.html" target="_blank" rel="noopener noreferrer">Secure Boot</a></li><li><a href="https://docs.espressif.com/projects/esp-idf/en/stable/security/flash-encryption.html" target="_blank" rel="noopener noreferrer">Flash encryption</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="f3-모니터링">F3 모니터링<a class="hash-link" href="#f3-모니터링" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="관련-요구사항-2">관련 요구사항<a class="hash-link" href="#관련-요구사항-2" title="Direct link to heading">​</a></h4><ul><li>[FID_03]<!-- --> 펌웨어 업데이트, Signal Monitoring을 위한 웹GUI를 제공해야 한다.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="하드웨어">하드웨어<a class="hash-link" href="#하드웨어" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="블루투스">블루투스<a class="hash-link" href="#블루투스" title="Direct link to heading">​</a></h3><p>T.B.D</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mcu">MCU<a class="hash-link" href="#mcu" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="사양">사양<a class="hash-link" href="#사양" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="주요기능">주요기능<a class="hash-link" href="#주요기능" title="Direct link to heading">​</a></h5><p align="center"><img loading="lazy" src="/webpage/assets/images/mbd_hw_module_mcu_esp32_devKitC_v4_board-ee5adafa9232993cb5756895c9fcb2ec.png" alt="Example banner" width="350" class="img_ev3q"><br><em>&lt;Modules on ESP32-DevKitC v4&gt;</em></p><ul><li>Internal Memory<ul><li>외부메모리 인터페이스를 지원하기 때문에 내부메모리는 외부메모리에 대한 독립된 캐시로 사용될 수 있다.</li></ul></li><li>External Memory  <ul><li>Supports up to 16 MB off-Chip SPI Flash</li><li>Supports up to 8 MB off-Chip SPI SRAM</li></ul></li><li>IO Usage<ul><li>USB커넥트 양쪽 근처에 그룹화 된 D0, D1, D2, D3, CMD 및 CLK는 내부적으로 ESP32와 SPI메모리(Flash/RAM) 간의 통신에 사용된다.</li></ul></li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="핀맵">핀맵<a class="hash-link" href="#핀맵" title="Direct link to heading">​</a></h5><p><a href="https://arsviator.blogspot.com/2018/11/esp32-gpio.html" target="_blank" rel="noopener noreferrer">ESP32 GPIO 포트 설명</a></p><p align="center"><img loading="lazy" src="/webpage/assets/images/mbd_hw_module_mcu_esp32_devkitC_v4_pinout-d9a15f3a32f6ec0e3bd9813d34a1b00b.png" alt="Example banner" width="350" class="img_ev3q"><br><em>&lt;PinMap of ESP32-DevKitC v4&gt;</em></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="메모리맵">메모리맵<a class="hash-link" href="#메모리맵" title="Direct link to heading">​</a></h5><p align="center"><img loading="lazy" src="/webpage/assets/images/mbd_hw_module_mcu_memory_map-899902b24b5ef71de82c6f7b7424639f.png" alt="Example banner" width="350" class="img_ev3q"><br><em>&lt;MemoroyMap in technical reference manual&gt;</em></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="부팅과정">부팅과정<a class="hash-link" href="#부팅과정" title="Direct link to heading">​</a></h5><ul><li>링커스크립트 파일(esp32_bootloader.ld)에서 Entry point를 call_start_cpu0()로 정의</li><li>..esp\esp-idf\components\esp_system\port\cpu_start.c -&gt; call_start_cpu0() -&gt; start_cpu0() -&gt; start_cpu0_default() -&gt; main_task() 생성 후 FreeRTOS vTaskStartScheduler()를 호출하여 스케쥴링 시작 -&gt; app_main() 호출 후 main_task 자기 자신 vTaskDelete() -&gt; app_main() 시작</li><li></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="참고자료-5">참고자료<a class="hash-link" href="#참고자료-5" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="mcu-comparision">MCU Comparision<a class="hash-link" href="#mcu-comparision" title="Direct link to heading">​</a></h5><p>ESP32 vs NodeMCU</p><table><thead><tr><th>ESP-WROOM-32</th><th>NodeMCU</th></tr></thead><tbody><tr><td>32bit Xtensa Dual-core</td><td>32bit Xtensa Single-core</td></tr><tr><td>Bluetooth 4.2+wifi</td><td>No Bluetooth</td></tr><tr><td>EEPROM Flash</td><td>No Flash</td></tr><tr><td>160MHz</td><td>80MHz</td></tr><tr><td>CAN protocol</td><td>No CAN protoclo</td></tr><tr><td>34 GPIO pin</td><td>17 GPIO pin</td></tr><tr><td>12 bit ADC</td><td>10 bit ADC</td></tr><tr><td>built-in Hall sensor, temperature sensor</td><td>No built-in sensor</td></tr></tbody></table><p>ESP32 vs ESP-32S</p><table><thead><tr><th>ESP32</th><th>ESP-32S</th></tr></thead><tbody><tr><td>ESP-WROOM-32</td><td>ESP-WROOM-32s</td></tr><tr><td>single-core</td><td>dual-core</td></tr><tr><td>wifi+ble</td><td>wifi+ble</td></tr></tbody></table><p><a href="https://iotassistant.io/news/esp32-s2-vs-esp32/" target="_blank" rel="noopener noreferrer">ESP32-s2</a></p><ul><li>IOT 및 스마트폰을 위한 low power wifi 솔루션(wifi only, no bluetooth support, esp32보다 50% 에너지 효율이 높음)에 적용하기 위해 설계되었다.</li><li>ESP32(Xtensa 32bit LX6 dual core) -&gt; ESP32(Xtensa 32bit LX7 single core)</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="데이터시트">데이터시트<a class="hash-link" href="#데이터시트" title="Direct link to heading">​</a></h5><p>ESP32-DevKitC v4는 ESP32-WROOM-32D MCU Core를 사용하는 wifi, Bluetooth 일체형 개발보드 이다.</p><ul><li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/hw-reference/esp32/get-started-devkitc.html" target="_blank" rel="noopener noreferrer">ESP32-DevKitC V4 Getting Started 가이드</a><ul><li>ESP32-DevKitC V4 주요 구성요소</li><li>헤더 Pinmap 및 레이아웃</li></ul></li><li><a href="https://github.com/espressif/esp-idf" target="_blank" rel="noopener noreferrer">ESP-IDF Github 소스</a><ul><li>ESP-IDF를 설치하면 <code>c:\Users\cdshim\esp\esp-idf\</code> 경로에 github에 있는 예제프로그램이 생성된다.</li><li><a href="https://github.com/sglee0223/esp32" target="_blank" rel="noopener noreferrer">esp32_devkit_v4 예제소스 github</a></li></ul></li><li>ESP32-WROOM-32D<ul><li><a href="https://www.espressif.com/sites/default/files/documentation/esp32-wroom-32d_esp32-wroom-32u_datasheet_en.pdf" target="_blank" rel="noopener noreferrer">ESP32-DevKitC V4 mcu hw datasheet : ESP32­WROOM­32D_datasheet_en.pdf</a></li><li><a href="https://dl.espressif.com/dl/schematics/esp32_devkitc_v4-sch.pdf" target="_blank" rel="noopener noreferrer">ESP32-DevKitC V4 회로도 : esp32_devkitc_v4-sch.pdf</a></li></ul></li><li>기타<ul><li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/index.html" target="_blank" rel="noopener noreferrer">ESP-IDF Programming Guide - API Reference</a></li><li><a href="https://coyoteugly.tistory.com/159?category=806422" target="_blank" rel="noopener noreferrer">ESP32-ADC</a></li></ul></li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="펌웨어-참고자료">펌웨어 참고자료<a class="hash-link" href="#펌웨어-참고자료" title="Direct link to heading">​</a></h5><ul><li>ESP32 peripheral<ul><li><a href="https://arsviator.blogspot.com/2018/11/esp32-gpio.html" target="_blank" rel="noopener noreferrer">ESP32 peripheral 설명</a></li><li><a href="https://postpop.tistory.com/15" target="_blank" rel="noopener noreferrer">ESP32 peripheral 설명2</a></li><li><a href="https://arsviator.blogspot.com/search?q=esp32" target="_blank" rel="noopener noreferrer">Deep Sleep &amp; Wake-up</a></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fw_ble">FW_BLE<a class="hash-link" href="#fw_ble" title="Direct link to heading">​</a></h3><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>GUI환경 구축</h5></div><div class="admonition-content"><ul><li>블루투스 통신을 위한 안드로이드 프로그래밍은 진행하지 않고, 앱스토어를 통해 무료설치가 가능한 BlueSPP 앱(원하는 기능을 충분히 구현할 수 있음)을 이용한다.</li><li>최종 GUI는 임베디드 웹서버를 구축한 다음 wifi를 통해 웹브라우저로 웹서버에 접속한다.</li></ul></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="기초이론">기초이론<a class="hash-link" href="#기초이론" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="ble">BLE<a class="hash-link" href="#ble" title="Direct link to heading">​</a></h5><ul><li>Classic Bluetooth는 항상연결되어 있는 반면 BLE는 일반적으로 대기모드에 있으며 필요한 경우에만 깨어나 전력을 적게 소모한다.</li><li>BLE는 2.4GHz ISM 주파수 대역에서도 작동하므로 Wi-fi와 BLE를 단일 안테나로 사용할 수 있다.</li><li><a href="https://github.com/chegewara/esp32-ble-wiki/issues/5" target="_blank" rel="noopener noreferrer">BLUETOOTH SPECIFICATION Version 5.0 - LIST OF ERROR CODES</a></li><li><a href="https://blog.naver.com/PostView.naver?blogId=cksung71&amp;logNo=10183530219&amp;categoryNo=15&amp;parentCategoryNo=0&amp;viewDate=&amp;currentPage=2&amp;postListTopCurrentPage=1&amp;from=postView&amp;userTopListOpen=true&amp;userTopListCount=30&amp;userTopListManageOpen=false&amp;userTopListCurrentPage=2" target="_blank" rel="noopener noreferrer">중요 - Packet Format 및 Advertising 방법</a></li><li><a href="https://docs.espressif.com/projects/esp-idf/en/stable/api-reference/bluetooth/index.html" target="_blank" rel="noopener noreferrer">EspressIF bluetooth API </a></li><li><a href="https://blog.naver.com/chodahi/221403306027" target="_blank" rel="noopener noreferrer">BLE에서 Pairing 과 Bonding</a></li><li><a href="https://www.hardcopyworld.com/?p=1132" target="_blank" rel="noopener noreferrer">BLE(Bluetooth Low Energy) 이해하기</a></li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="블루투스-프로파일">블루투스 프로파일<a class="hash-link" href="#블루투스-프로파일" title="Direct link to heading">​</a></h5><p>블루투스 프로파일은 블루투스 서비스라고도 하며 블루투스 통신계층 최상단에 있는 일종의 프로토콜로 블루투스에는 수십개의 프로파일 표준이 존재한다.</p><ul><li>SPP<ul><li>블루투스 프로파일 중 SPP(Serial Port Profile)은 블루투스를 통해 RS232와 같은 기능을 하는 서비스다. SPP를 지원하는 블루투스 장치를 PC와 연결하면 PC에 가상 COM포트가 생성되고, 무선으로 RS232통신을 할 수 있다.</li><li>SPP는 블루투스 Classic에서 정의되고 있고, BLE(Bluetooth LE)에는 정의되어 있지 않기 때문에 BLE를 사용하면 PC에 가상 COM포트가 생성되지 않는다.</li></ul></li><li>SSP<ul><li>SSP(Secure Simple Pairing)는 bluetooth 2.1 Spec에 도입되었다.</li><li>SSP를 사용하면 Bluetooth 장치를 더 간단하게 페어링할 수 있다.</li></ul></li><li><a href="https://hubbleconstant.tistory.com/29" target="_blank" rel="noopener noreferrer">보안</a><ul><li>Security Management Protocol(SMP)라고 하는 보안 메커니즘을 제공한다.</li><li>블루투스 v2.1 이전까지는 PIN코드를 입력할 인터페이스가 없는 기기에 하드코딩된 PIN을 사용하는 단순 메커니즘이었는데,</li><li>이후 Diffie-Hellman 키교환방식을 사용하는 SSP(Secure Simple Pairing)라는 인증 메커니즘을 도입하여 PINCODE 입력없이 Pairing이 가능하게 되었다. (SSP를 지원하지 않는 모듈과는 PINCODE 입력이 필요함)</li><li>SSP를 통해서는 블루투스 기기 연결 시 상대기기의 동의를 구한다음 수락을 통해 연결이 성립된다.</li></ul></li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="비콘">비콘<a class="hash-link" href="#비콘" title="Direct link to heading">​</a></h5><ul><li>어떤 신호를 알리기 위해 주기적으로 신호를 전송하는 기기를 말하며, 애플이 2013년에 BLE기반에 비콘개념을 적용하여 ibeacon을 발표한 이후 ibeacon을 비콘이라고 부른다. </li><li>비콘은 소량의 패킷 전송으로 동작이 가능하고, 기기를 연결하기 위한 페이링이 불필요하며, 저전력으로 통신하기 때문에 다른 무선 통신기루에 비해 저비용으로 위치를 인식할 수 있다.</li><li>비콘은 장치가 있건 없건 상관없이 특정 장치를 지정하지 않고 주변의 모든 장치에게 일방적으로 일정주기의 신호를 보내기 때문에 비콘을 사용할 경우 장비 접촉없이 beacon이 설치된 곳을 지나가기만 해도 데이터 전송이 가능하다.</li><li><a href="https://blog.naver.com/PostView.naver?blogId=cksung71&amp;logNo=10183539970&amp;categoryNo=15&amp;parentCategoryNo=0&amp;viewDate=&amp;currentPage=2&amp;postListTopCurrentPage=1&amp;from=postView&amp;userTopListOpen=true&amp;userTopListCount=30&amp;userTopListManageOpen=false&amp;userTopListCurrentPage=2" target="_blank" rel="noopener noreferrer">iBeacon Advertising Packet  Data</a></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ble구성"><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/bluetooth/index.html" target="_blank" rel="noopener noreferrer">BLE구성</a><a class="hash-link" href="#ble구성" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="기능">기능<a class="hash-link" href="#기능" title="Direct link to heading">​</a></h5><h5 class="anchor anchorWithStickyNavbar_LWe7" id="인터페이스">인터페이스<a class="hash-link" href="#인터페이스" title="Direct link to heading">​</a></h5><h5 class="anchor anchorWithStickyNavbar_LWe7" id="레지스터설정">레지스터설정<a class="hash-link" href="#레지스터설정" title="Direct link to heading">​</a></h5><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>BT 파라미터 초기화 및 Enable</summary><div><div class="collapsibleContent_i85q"><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Following parameters can be configured runtime, when call esp_bt_controller_init()</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint16_t</span><span class="token plain"> controller_task_stack_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Bluetooth controller task stack size</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> controller_task_prio</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// Bluetooth controller task priority</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> hci_uart_no</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">// If use UART1/2 as HCI IO interface, indicate UART number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> hci_uart_baudrate</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">// If use UART1/2 as HCI IO interface, indicate UART baudrate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> scan_duplicate_mode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// scan duplicate mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> scan_duplicate_type</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// scan duplicate type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint16_t</span><span class="token plain"> normal_adv_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic">// Normal adv size for scan duplicate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint16_t</span><span class="token plain"> mesh_adv_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">// Mesh adv size for scan duplicate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint16_t</span><span class="token plain"> send_adv_reserved_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Controller minimum memory value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain">  controller_debug_flag</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Controller debug log flag</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> mode</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                           </span><span class="token comment" style="color:#999988;font-style:italic">// Controller mode: BR/EDR, BLE or Dual Mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> ble_max_conn</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">// BLE maximum connection numbers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> bt_max_acl_conn</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// BR/EDR maximum ACL connection numbers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> bt_sco_datapath</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// SCO data path, i.e. HCI or PCM module</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool auto_latency</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic">// BLE auto latency, used to enhance classic BT performance</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool bt_legacy_auth_vs_evt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">// BR/EDR Legacy auth complete event required to  protect from BIAS attack</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * Following parameters can not be configured runtime when call esp_bt_controller_init()</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * It will be overwrite with a constant value which in menuconfig or from a macro.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     * So, do not modify the value when esp_bt_controller_init()</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> bt_max_sync_conn</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic">// BR/EDR maximum ACL connection numbers. Effective in menuconfig</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> ble_sca</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                        </span><span class="token comment" style="color:#999988;font-style:italic">// BLE low power crystal accuracy index</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> pcm_role</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                       </span><span class="token comment" style="color:#999988;font-style:italic">// PCM role (master &amp; slave)*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint8_t</span><span class="token plain"> pcm_polar</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic">// PCM polar trig (falling clk edge &amp; rising clk edge)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> magic</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                         </span><span class="token comment" style="color:#999988;font-style:italic">// Magic number</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token class-name">esp_bt_controller_config_t</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">define</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property macro-name function" style="color:#d73a49">BT_CONTROLLER_INIT_CONFIG_DEFAULT</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token macro property expression" style="color:#36acaa"> </span><span class="token macro property expression punctuation" style="color:#393A34">{</span><span class="token macro property expression" style="color:#36acaa">                              </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">controller_task_stack_size </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> ESP_TASK_BT_CONTROLLER_STACK</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">            </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">controller_task_prio </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> ESP_TASK_BT_CONTROLLER_PRIO</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">                   </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">hci_uart_no </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> BT_HCI_UART_NO_DEFAULT</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">                                 </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">hci_uart_baudrate </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> BT_HCI_UART_BAUDRATE_DEFAULT</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">                     </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">scan_duplicate_mode </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> SCAN_DUPLICATE_MODE</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">                            </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">scan_duplicate_type </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> SCAN_DUPLICATE_TYPE_VALUE</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">                      </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">normal_adv_size </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> NORMAL_SCAN_DUPLICATE_CACHE_SIZE</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">                   </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">mesh_adv_size </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> MESH_DUPLICATE_SCAN_CACHE_SIZE</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">                       </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">send_adv_reserved_size </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> SCAN_SEND_ADV_RESERVED_SIZE</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">                 </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">controller_debug_flag </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> CONTROLLER_ADV_LOST_DEBUG_BIT</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">                </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">mode </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> BTDM_CONTROLLER_MODE_EFF</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">                                      </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">ble_max_conn </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> CONFIG_BTDM_CTRL_BLE_MAX_CONN_EFF</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">                     </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">bt_max_acl_conn </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> CONFIG_BTDM_CTRL_BR_EDR_MAX_ACL_CONN_EFF</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">           </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">bt_sco_datapath </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> CONFIG_BTDM_CTRL_BR_EDR_SCO_DATA_PATH_EFF</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">          </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">auto_latency </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> BTDM_CTRL_AUTO_LATENCY_EFF</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">                            </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">bt_legacy_auth_vs_evt </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> BTDM_CTRL_LEGACY_AUTH_VENDOR_EVT_EFF</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">         </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">bt_max_sync_conn </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> CONFIG_BTDM_CTRL_BR_EDR_MAX_SYNC_CONN_EFF</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">         </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">ble_sca </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> CONFIG_BTDM_BLE_SLEEP_CLOCK_ACCURACY_INDEX_EFF</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">             </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">pcm_role </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> CONFIG_BTDM_CTRL_PCM_ROLE_EFF</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">                             </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">pcm_polar </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> CONFIG_BTDM_CTRL_PCM_POLAR_EFF</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">                           </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">    </span><span class="token macro property expression punctuation" style="color:#393A34">.</span><span class="token macro property expression" style="color:#36acaa">magic </span><span class="token macro property expression operator" style="color:#393A34">=</span><span class="token macro property expression" style="color:#36acaa"> ESP_BT_CONTROLLER_CONFIG_MAGIC_VAL</span><span class="token macro property expression punctuation" style="color:#393A34">,</span><span class="token macro property expression" style="color:#36acaa">                           </span><span class="token macro property punctuation" style="color:#393A34">\</span><span class="token macro property" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa"></span><span class="token macro property expression punctuation" style="color:#393A34">}</span><span class="token macro property expression punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">esp_bt_controller_config_t</span><span class="token plain"> bt_cfg </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">BT_CONTROLLER_INIT_CONFIG_DEFAULT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">esp_bt_controller_init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">bt_cfg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">ESP_LOGE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SPP_TAG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;%s initialize controller failed: %s\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">__func__</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">esp_err_to_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">esp_bt_controller_enable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ESP_BT_MODE_CLASSIC_BT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">ESP_LOGE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SPP_TAG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;%s enable controller failed: %s\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">__func__</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">esp_err_to_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>bluedroid 초기화 및 Enable</summary><div><div class="collapsibleContent_i85q"><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">esp_bluedroid_init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">ESP_LOGE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SPP_TAG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;%s initialize bluedroid failed: %s\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">__func__</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">esp_err_to_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">esp_bluedroid_enable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">ESP_LOGE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SPP_TAG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;%s enable bluedroid failed: %s\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">__func__</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">esp_err_to_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>BT 및 SPP 콜백함수 등록</summary><div><div class="collapsibleContent_i85q"><ol><li>ESP_SPP_INIT_EVT -&gt; ESP_SPP_START_EVT<br>처음 bt_spp_acceptor 펌웨어 실행 시 발생</li><li>ESP_SPP_OPEN_EVT<br>안드로이드 앱에서 ESP32 블루투스 연결 시 발생</li><li>ESP_SPP_DATA_IND_EVT
안도르오드 앱에서 패킷 전송 시 발생</li></ol><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//========================</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// BT GAP callback events</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 다음 이벤트가 발생하면 esp_bt_gap_cb() 콜백함수가 호출되어 발생한 이벤트를 처리한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_DISC_RES_EVT </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">// Device discovery result event</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_DISC_STATE_CHANGED_EVT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Discovery state changed event</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_RMT_SRVCS_EVT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">// Get remote services event</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_RMT_SRVC_REC_EVT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">// Get remote service record event</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_AUTH_CMPL_EVT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">// Authentication complete event</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_PIN_REQ_EVT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">// Legacy Pairing Pin code request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_CFM_REQ_EVT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">// Security Simple Pairing User Confirmation request.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_KEY_NOTIF_EVT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                 </span><span class="token comment" style="color:#999988;font-style:italic">// Security Simple Pairing Passkey Notification</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_KEY_REQ_EVT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                   </span><span class="token comment" style="color:#999988;font-style:italic">// Security Simple Pairing Passkey request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_READ_RSSI_DELTA_EVT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// Read rssi event</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_CONFIG_EIR_DATA_EVT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// Config EIR data event</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_SET_AFH_CHANNELS_EVT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// Set AFH channels event</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_READ_REMOTE_NAME_EVT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// Read Remote Name event</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_MODE_CHG_EVT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_REMOVE_BOND_DEV_COMPLETE_EVT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// remove bond device complete event</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_QOS_CMPL_EVT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic">// QOS complete event</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_BT_GAP_EVT_MAX</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token class-name">esp_bt_gap_cb_event_t</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">esp_bt_gap_register_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">esp_bt_gap_cb</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">ESP_LOGE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SPP_TAG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;%s gap register failed: %s\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">__func__</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">esp_err_to_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//========================</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// BT GAP callback events</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//------------------------</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 다음 이벤트가 발생하면 esp_spp_cb() 콜백함수가 호출되어 발생한 이벤트를 처리한다.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">enum</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_SPP_INIT_EVT            </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// When SPP is inited, the event comes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_SPP_UNINIT_EVT          </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// When SPP is uninited, the event comes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_SPP_DISCOVERY_COMP_EVT  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// When SDP discovery complete, the event comes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_SPP_OPEN_EVT            </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">26</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// When SPP Client connection open, the event comes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_SPP_CLOSE_EVT           </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">27</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// When SPP connection closed, the event comes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_SPP_START_EVT           </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">28</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// When SPP server started, the event comes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_SPP_CL_INIT_EVT         </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">29</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// When SPP client initiated a connection, the event comes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_SPP_DATA_IND_EVT        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// When SPP connection received data, the event comes, only for ESP_SPP_MODE_CB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_SPP_CONG_EVT            </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">31</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// When SPP connection congestion status changed, the event comes, only for ESP_SPP_MODE_CB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_SPP_WRITE_EVT           </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">33</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// When SPP write operation completes, the event comes, only for ESP_SPP_MODE_CB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_SPP_SRV_OPEN_EVT        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">34</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// When SPP Server connection open, the event comes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ESP_SPP_SRV_STOP_EVT        </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">35</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// When SPP server stopped, the event comes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token class-name">esp_spp_cb_event_t</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">esp_spp_register_callback</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">esp_spp_cb</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">ESP_LOGE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SPP_TAG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;%s spp register failed: %s\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">__func__</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">esp_err_to_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>SPP 초기화</summary><div><div class="collapsibleContent_i85q"><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">esp_spp_init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">esp_spp_mode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> ESP_OK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">ESP_LOGE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SPP_TAG</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;%s spp init failed: %s\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">__func__</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">esp_err_to_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ret</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>BT Security 설정</summary><div><div class="collapsibleContent_i85q"><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">if</span><span class="token macro property expression punctuation" style="color:#393A34">(</span><span class="token macro property expression" style="color:#36acaa">CONFIG_BT_SSP_ENABLED </span><span class="token macro property expression operator" style="color:#393A34">==</span><span class="token macro property expression" style="color:#36acaa"> true</span><span class="token macro property expression punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/* Set default parameters for Secure Simple Pairing</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  esp_bt_sp_param_t param_type = ESP_BT_SP_IOCAP_MODE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  esp_bt_io_cap_t iocap = ESP_BT_IO_CAP_IO;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">  esp_bt_gap_set_security_param(param_type, &amp;iocap, sizeof(uint8_t));</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#endif</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Paring PinCode 설정</summary><div><div class="collapsibleContent_i85q"><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * Set default parameters for Legacy Pairing</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * Use variable pin, input pin code when pairing</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="display:inline-block;color:#999988;font-style:italic"></span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">esp_bt_pin_type_t pin_type = ESP_BT_PIN_TYPE_VARIABLE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">esp_bt_pin_code_t pin_code;</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">esp_bt_gap_set_pin(pin_type, 0, pin_code);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><h4 class="anchor anchorWithStickyNavbar_LWe7" id="예제확인">예제확인<a class="hash-link" href="#예제확인" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="bt_spp_acceptor">bt_spp_acceptor<a class="hash-link" href="#bt_spp_acceptor" title="Direct link to heading">​</a></h5><p>example_spp_acceptor_demo.c -&gt; 동작확인완료</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="참고자료-6">참고자료<a class="hash-link" href="#참고자료-6" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="ble-개념">BLE 개념<a class="hash-link" href="#ble-개념" title="Direct link to heading">​</a></h5><ul><li><a href="https://enidanny.github.io/ble/" target="_blank" rel="noopener noreferrer">BLE 정리 by 임베디드 개발장이</a><ul><li><a href="https://enidanny.github.io/ble/what-is-the-ble/" target="_blank" rel="noopener noreferrer">BLE (1) - 저전력 블루투스 (BLE) 란?</a></li><li><a href="https://enidanny.github.io/ble/ble-protocol-stack/" target="_blank" rel="noopener noreferrer">BLE (2) - BLE 프로토콜 스택</a></li><li><a href="https://enidanny.github.io/ble/ble-att-gatt/" target="_blank" rel="noopener noreferrer">BLE (3) - ATT/GATT 이해하기</a></li><li><a href="https://enidanny.github.io/ble/ble-connection/" target="_blank" rel="noopener noreferrer">BLE (4) - BLE 디바이스는 어떻게 연결할까?</a></li><li><a href="https://enidanny.github.io/ble/ble-effective-throughput/" target="_blank" rel="noopener noreferrer">BLE (5) - BLE 통신 속도는 실제로 1 Mbps 일까?</a></li><li><a href="https://enidanny.github.io/ble/ble5-intro/" target="_blank" rel="noopener noreferrer">BLE (6) - BLE 5.0 주요 특징</a></li><li><a href="https://enidanny.github.io/ble/ble-slave-latency/" target="_blank" rel="noopener noreferrer">BLE (7) - 연결 파라미터</a></li><li><a href="https://enidanny.github.io/ble/ble-development/" target="_blank" rel="noopener noreferrer">BLE (8) - Nordic BLE Chip 개발환경 구축하기</a></li><li><a href="https://enidanny.github.io/ble/ble-mesh/" target="_blank" rel="noopener noreferrer">BLE (9) - 블루투스 메시: Overview of Mesh stack</a></li><li><a href="https://enidanny.github.io/ble/ble-mesh-opeartion/" target="_blank" rel="noopener noreferrer">BLE (10) - 블루투스 메시: Overview of Mesh operation</a></li><li><a href="https://enidanny.github.io/ble/ble-mesh-concepts/" target="_blank" rel="noopener noreferrer">BLE (11) - 블루투스 메시: Overview of Mesh concepts</a></li><li><a href="https://enidanny.github.io/ble/ble-mesh-message/" target="_blank" rel="noopener noreferrer">BLE (12) - 블루투스 메시: Advertising Bearer 포맷</a></li><li><a href="https://enidanny.github.io/ble/ble-bluetooth-news-51/" target="_blank" rel="noopener noreferrer">BLE (13) - 블루투스 소식: Bluetooth 5.1</a></li><li><a href="https://enidanny.github.io/ble/ble-bluetooth-52/" target="_blank" rel="noopener noreferrer">BLE (14) - 새로운 무선 오디오 시장의 시작: Bluetooth 5.2</a></li><li><a href="https://enidanny.github.io/ble/ble-bluetooth53/" target="_blank" rel="noopener noreferrer">BLE (15) - Bluetooth 5.3 에서 개선 및 추가된 BLE 기능</a></li></ul></li><li>블루투스 앱<ul><li><a href="https://karrel.tistory.com/m/15" target="_blank" rel="noopener noreferrer">블루투스 SPP를 위한 샘플 앱 개발</a></li><li><a href="http://jinyongjeong.github.io/2018/09/27/bluetoothpairing/" target="_blank" rel="noopener noreferrer">안드로이드 어플에서 직접 주변기기를 검색하고 pairing 하는 방법</a></li><li><a href="https://www.hardcopyworld.com/?p=" target="_blank" rel="noopener noreferrer">홈 오토메이션을 위한 모바일 앱 만들기</a></li></ul></li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="아두이노">아두이노<a class="hash-link" href="#아두이노" title="Direct link to heading">​</a></h5><p>아두이노에서 제공하는 라이브러리를 이용하면 블루투스 통신을 매우 간단하게 구현할 수 있다.</p><ul><li><a href="https://arsviator.blogspot.com/2019/07/esp32-spp-profile.html" target="_blank" rel="noopener noreferrer">ESP32에서 블루투스 사용하기</a></li><li><a href="https://velog.io/@embeddedjune/BLE-%EA%B0%9C%EB%B0%9C-%EA%B4%80%EB%A0%A8-%EB%82%B4%EC%9A%A9-%EC%A0%95%EB%A6%AC" target="_blank" rel="noopener noreferrer">Arduino-ESP32-BLE 개발 관련 내용 정리 - 쉽게 설명, Good</a></li><li><a href="https://www.bneware.com/blogPost/esp32_arduino_bluetooth" target="_blank" rel="noopener noreferrer">ESP32 아두이노 블루투스 테스트 - 아주 쉬움</a></li><li><a href="https://github.com/fbiego/ESP32_BLE_OTA_Arduino/blob/main/esp32_nim_ble_ota/esp32_nim_ble_ota.ino" target="_blank" rel="noopener noreferrer">ESP32_BLE_OTA_Arduino</a></li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="esp-idf">ESP-IDF<a class="hash-link" href="#esp-idf" title="Direct link to heading">​</a></h5><ul><li><a href="https://www.espressif.com/sites/default/files/documentation/esp32_bluetooth_architecture_en.pdf" target="_blank" rel="noopener noreferrer">ESP32 Bluetooth Architecture</a></li><li><a href="https://higaski.at/aoihashi-esp32-bluetooth-serial-module/" target="_blank" rel="noopener noreferrer">ESP32 bluetooth serial module</a></li><li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/system/ota.html#secure-ota-updates-without-secure-boot" target="_blank" rel="noopener noreferrer">Over The Air Updates (OTA)</a></li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="nordic-nrf51-dk">Nordic nRF51-DK<a class="hash-link" href="#nordic-nrf51-dk" title="Direct link to heading">​</a></h5><p>ESP32는 소스코드를 제공하지 않는 반면 nRF 시리즈는 소스코드를 제공하고, mbed도 지원함.</p><ul><li><a href="https://www.youtube.com/watch?v=LdY2m_bZTgE" target="_blank" rel="noopener noreferrer">nRF51 DK FOTA 컨셉 및 예제 프로젝트 실행방법 from 유투브</a></li><li><a href="https://os.mbed.com/platforms/Nordic-nRF51-DK/#support-for-fota" target="_blank" rel="noopener noreferrer">support arm mbed and fota</a></li><li><a href="https://docs.google.com/viewer?url=http%3A%2F%2Finfocenter.nordicsemi.com%2Fpdf%2FnRF51_Dongle_UG_v1.0.pdf&amp;embedded=true&amp;chrome=false&amp;dov=1" target="_blank" rel="noopener noreferrer">nRF51 Dongle SDK</a> - 가격: <a href="https://www.eleparts.co.kr/goods/view?no=9378612" target="_blank" rel="noopener noreferrer">엘레파츠 12만원</a></li><li><a href="https://docs.google.com/viewer?url=https%3A%2F%2Finfocenter.nordicsemi.com%2Fpdf%2FnRF51_DK_UG_v1.1.pdf&amp;embedded=true&amp;chrome=false&amp;dov=1" target="_blank" rel="noopener noreferrer">NRF51-DK SDK</a> - 가격: <a href="https://eleparts.co.kr/EPXKTGB3" target="_blank" rel="noopener noreferrer">엘레파츠 6만원</a></li><li><a href="https://m.blog.naver.com/PostView.naver?blogId=cksung71&amp;logNo=221262064390&amp;targetKeyword=&amp;targetRecommendationCode=1" target="_blank" rel="noopener noreferrer">SEGGER Embedded Studio for nRF5</a></li><li><a href="https://devzone.nordicsemi.com/nordic/short-range-guides/b/software-development-kit/posts/setting-up-device-firmware-updatedfu-on-the-nrf5-d" target="_blank" rel="noopener noreferrer">nRF5 DK에서 장치 펌웨어 업데이트(DFU) 설정</a></li><li><a href="https://m.blog.naver.com/PostView.naver?blogId=cksung71&amp;logNo=221262064390&amp;targetKeyword=&amp;targetRecommendationCode=1" target="_blank" rel="noopener noreferrer">완전 무료 개발 툴 : SEGGER Embedded Studio</a></li><li><a href="https://www.youtube.com/watch?v=YZouRE_Ol8g&amp;t=18s" target="_blank" rel="noopener noreferrer">SEGGER Embedded studio – Getting started from 유투브</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fw_ble_uart">FW_BLE_UART<a class="hash-link" href="#fw_ble_uart" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="예제확인-1">예제확인<a class="hash-link" href="#예제확인-1" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="프로젝트-이름-변경">프로젝트 이름 변경<a class="hash-link" href="#프로젝트-이름-변경" title="Direct link to heading">​</a></h5><ol><li>ESP-IDF 블루투스 예제 프로젝트 생성</li><li>이클립스 프로젝트이름 변경<br>bt_spp_acceptor -&gt; bt_uart로 변경</li><li>main()함수가 있는 파일명 변경<br>example_spp_acceptor_demo.c -&gt; bt_uart.c로 변경</li><li>빌드 시 참고되는 소스파일 명 변경<br>CMakeLists.txt 파일 Open<br>SRCS를 example_spp_acceptor_demo.c -&gt; bt_uart.c로 변경</li></ol><h5 class="anchor anchorWithStickyNavbar_LWe7" id="menuconfig에-uart설정-추가">menuconfig에 UART설정 추가<a class="hash-link" href="#menuconfig에-uart설정-추가" title="Direct link to heading">​</a></h5><ol><li>ESP-IDF UART 예제프로젝트에서 Kconfig.projbuild 복사하여</li><li>bt_uart 프로젝트 main 폴더에 붙여넣기</li><li>기존에 생성한 build 폴더 삭제 후 빌드 재수행</li><li>설정파일 열기<br>콘솔(ESP-IDF 4.3 CMD)에서 idf.py menuconfig or 이클립스에서 sdkconfig 더블클릭</li><li>menuconfig에서 추가된 UART 확인</li></ol><h5 class="anchor anchorWithStickyNavbar_LWe7" id="코드구현">코드구현<a class="hash-link" href="#코드구현" title="Direct link to heading">​</a></h5><ul><li><a href="https://gitlab.com/private210/ewserver/-/blob/main/function/bt_uart/main/bt_uart.c" target="_blank" rel="noopener noreferrer">gitlab login 후 링크확인</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fw_can">FW_CAN<a class="hash-link" href="#fw_can" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="기초이론-1">기초이론<a class="hash-link" href="#기초이론-1" title="Direct link to heading">​</a></h4><h4 class="anchor anchorWithStickyNavbar_LWe7" id="can구성">CAN구성<a class="hash-link" href="#can구성" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="인터페이스-1">인터페이스<a class="hash-link" href="#인터페이스-1" title="Direct link to heading">​</a></h5><h5 class="anchor anchorWithStickyNavbar_LWe7" id="레지스터설정-1">레지스터설정<a class="hash-link" href="#레지스터설정-1" title="Direct link to heading">​</a></h5><h4 class="anchor anchorWithStickyNavbar_LWe7" id="예제확인-2">예제확인<a class="hash-link" href="#예제확인-2" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="timer_group">timer_group<a class="hash-link" href="#timer_group" title="Direct link to heading">​</a></h5><h4 class="anchor anchorWithStickyNavbar_LWe7" id="참고자료-7">참고자료<a class="hash-link" href="#참고자료-7" title="Direct link to heading">​</a></h4><ul><li><a href="https://arsviator.blogspot.com/2019/06/esp32-can-bus.html" target="_blank" rel="noopener noreferrer">ESP32에서 CAN bus 사용하기</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fw_gpio">FW_GPIO<a class="hash-link" href="#fw_gpio" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="gpio구성"><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/gpio.html" target="_blank" rel="noopener noreferrer">GPIO구성</a><a class="hash-link" href="#gpio구성" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="기능-1">기능<a class="hash-link" href="#기능-1" title="Direct link to heading">​</a></h5><ul><li>34개의 physical GPIO pad를 갖는데 이중 몇몇은 사용 불가능함.</li><li>각 패드는 GPIO 또는 internal peripherals signal로 연결하여 사용될 수 있다.</li></ul><p align="center"><img loading="lazy" src="/webpage/assets/images/mbd_hw_fw_gpio1_pinmap-7e35a08be2be04140abbfce79824858c.png" alt="Example banner" width="350" class="img_ev3q"><br><em>&lt;GPIO Alternative Configuration&gt;</em></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="인터페이스-2">인터페이스<a class="hash-link" href="#인터페이스-2" title="Direct link to heading">​</a></h5><ul><li>출력설정 : GPIO18, GPIO19 포트로 0/1 신호 출력</li><li>입력설정 : GPIO4(both edge), GPIO5(rising edge) 포트로 인터럽트(EXT_INT) 신호 입력</li></ul><p align="center"><img loading="lazy" src="/webpage/assets/images/mbd_hw_fw_gpio2_interface-fb3f2c5038c9e110965ebbddb79664af.png" alt="Example banner" width="350" class="img_ev3q"><br><em>&lt;입/출력 포트 정의&gt;</em></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="레지스터설정-2">레지스터설정<a class="hash-link" href="#레지스터설정-2" title="Direct link to heading">​</a></h5><h4 class="anchor anchorWithStickyNavbar_LWe7" id="예제확인-3">예제확인<a class="hash-link" href="#예제확인-3" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="generic_gpio">generic_gpio<a class="hash-link" href="#generic_gpio" title="Direct link to heading">​</a></h5><p><a href="https://gitlab.com/private210/ewserver/-/blob/main/peripherals/esp32/generic_gpio/main/gpio_example_main.c" target="_blank" rel="noopener noreferrer"><code>gitlab 로그인 -&gt; private repository -&gt; generic_gpio.c</code></a></p><p>다음과 같이 console printf, gpio, ext_int, create_task, queue 동작을 확인한다.</p><ol><li>1s 간격으로 GPIO18, GPIO19 출력 Toggling</li><li>GPIO4(both edge), GPIO5(rising edge) 포트를 통해 인터럽트가 발생하면 포트번호를 인자로 갖는 xQueueSendFromISR 발생</li><li>Task에서 Queue 수신 시 포트번호/신호레벨 printf</li></ol><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">isr_ext_int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 인터러럽트 발생 시 Send_Queue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">gpio_task</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">xQueueReceive</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;port_number, port_level&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">app_main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// gpio 출력 설정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// gpio 입력 설정</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Queue 및 태스크 생성(생성에 성공하면 task는 바로 시작됨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ext_int isr 등록</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">while</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 1s delay</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// cnt++ print</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// port0 and port1 0/1 toggling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="분석">분석<a class="hash-link" href="#분석" title="Direct link to heading">​</a></h4><p>기본이되는 GPIO toggling 예제프로그램을 통해 프로젝트 구조를 파악한다.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="프로젝트-실행">프로젝트 실행<a class="hash-link" href="#프로젝트-실행" title="Direct link to heading">​</a></h5><p>다음 절차를 통해 ESP에서 제공하는 예제프로젝트를 생성한다.</p><ol><li>esp32-idf eclipse에서 File-&gt;New-&gt;Espressif IDF Project를 선택한다.
여기서는 peripherals-&gt;gpio-&gt;<code>generic_gpio</code> 프로젝트를 선택한다.<p align="center"><img loading="lazy" src="/webpage/assets/images/mbd_hw_fw_gpio3_prj_create-62f2f1536217076193ad8db0d233a97a.png" alt="Example banner" width="350" class="img_ev3q"><br><em>&lt;esp32-idf에저 제공되는 gpio 예제프로젝트 생성&gt;</em></p></li><li>타겟을 esp32로 선택한 다음 Build&amp;Run을 통해 ESP32보드에 실행파일을 다운로드 한다.<p align="center"><img loading="lazy" src="/webpage/assets/images/mbd_hw_fw_gpio4_prj_create-8c6b31271dfd0d67e03780fc9dfbef97.png" alt="Example banner" width="350" class="img_ev3q"><br><em>&lt;프로젝트 빌드 및 실행&gt;</em></p></li><li>esp32-idf eclipse에서 제공되는 터미널을 통해 printf 출력을 모니터링 한다.<br>Window 탭 -&gt; Show view -&gt; terminal<p align="center"><img loading="lazy" src="/webpage/assets/images/mbd_hw_fw_gpio5_prj_create-e86dba2a1ec6da33a4354f52eb06b3fd.png" alt="Example banner" width="350" class="img_ev3q"><br><em>&lt;printf 콘솔 모니터링&gt;</em></p></li></ol><h5 class="anchor anchorWithStickyNavbar_LWe7" id="프로젝트-구조">프로젝트 구조<a class="hash-link" href="#프로젝트-구조" title="Direct link to heading">​</a></h5><p>Basic Firmware(led blinking)에 대한 분석을 통해 프로젝트 구조를 파악한다.</p><ul><li>esp32-idf에서 제공되는 예제 프로젝트는 다음과 같은 구조로 프로젝트를 생성하며,
build 폴더 하위경로에 esp-idf sdk directory 구조와 동일하게 폴더를 생성한다.</li><li>esp-idf sdk에 있는 소스를 빌드하여 library(<em>.a) 파일로 만들어 build 폴더 하위 경로에 library(</em>.a) 파일을 생성/링킹한다.</li><li>따라서 프로젝트에는 main.c파일만 생성되며, 이외의 파일은 library(*.a) 파일로 존재하며, 원본소스를 확인하려면 esp-idf sdk 설치경로(C:\Users\cdshim\esp\esp-idf)에 있는 소스파일을 확인해야 한다.</li></ul><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">generic_gpio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┣━ Binaries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃   ┣━ bootloader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃   ┗━ generic</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">gpio</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┣━ build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃   ┣━ bootloader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃   ┗━ esp</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">idf             </span><span class="token comment" style="color:#999988;font-style:italic">// esp-idf sdk의</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃       ┣━ bootloader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃       ┗━ driver          </span><span class="token comment" style="color:#999988;font-style:italic">// driver 폴더에 위치한 소스를 빌드하여</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃          ┗━ libdriver</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">a  </span><span class="token comment" style="color:#999988;font-style:italic">// library로 만들어 이곳에 저장</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃             </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┣━ main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃   ┣━ generic</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">gpio_main</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">c </span><span class="token comment" style="color:#999988;font-style:italic">// main 소스파일</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃   ┣━ CMakeLists</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┃   ┗━ component</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">mk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┣━ CMakeList</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┣━ example_test</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┣━ Makefile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┣━ README</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">md               </span><span class="token comment" style="color:#999988;font-style:italic">// 프로젝트 설명(eclipse에서 markdown 포멧으로 확인가능)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┣━ sdkconfig               </span><span class="token comment" style="color:#999988;font-style:italic">// 더블클릭 -&gt; 프로젝트 관련 설정(= menuconfig)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ┗━ sdkconfig_old           </span><span class="token comment" style="color:#999988;font-style:italic">// 원본 설정파일</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="참고자료-8">참고자료<a class="hash-link" href="#참고자료-8" title="Direct link to heading">​</a></h4><ul><li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/esp-idf-en-v4.4-dev-3235-g3e370c4-esp32.pdf" target="_blank" rel="noopener noreferrer">ESP32 ESP-IDF Programming Guide(2312p).pdf</a><ul><li>705p, <code>2.3.4 GPIO &amp; RTC GPIO</code></li></ul></li><li><a href="https://www.espressif.com/sites/default/files/documentation/esp32_technical_reference_manual_en.pdf#iomuxgpio" target="_blank" rel="noopener noreferrer">esp32_technical_reference_manual_en(720p).pdf</a><ul><li>45p, <code>4 IO_MUX and GPIO Matrix (GPIO, IO_MUX)</code></li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fw_timer">FW_TIMER<a class="hash-link" href="#fw_timer" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="timer구성"><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/timer.html" target="_blank" rel="noopener noreferrer">TIMER구성</a><a class="hash-link" href="#timer구성" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="기능-2">기능<a class="hash-link" href="#기능-2" title="Direct link to heading">​</a></h5><ul><li>2개의 하드웨어 타이머 그룹을 갖고 있으며, 각 그룹은 2개의 general-purpose hardware timer를 갖고 있다.</li><li>모든 타이머는 16bit prescaler를 갖는 64bit timer로,</li><li>auto-reload를 통해 up/down 카운터로 동작한다.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="인터페이스-3">인터페이스<a class="hash-link" href="#인터페이스-3" title="Direct link to heading">​</a></h5><p>타이머인터럽트 발생 시 등록해 놓은 콜백함수가 호출되어 메시지를 큐버퍼에 저장하고, main에서 메시지 수신 시 printf를 통해 콜백함수 호출여부를 확인한다.<br>
<!-- -->따라서 printf 만으로 동작을 확인하기 때문에 별도의 인터페이스는 필요없다.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="레지스터설정-3">레지스터설정<a class="hash-link" href="#레지스터설정-3" title="Direct link to heading">​</a></h5><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>파라미터 설정</summary><div><div class="collapsibleContent_i85q"><ul><li>구조체에 값을 설정하여 esp32_api timer_init() 함수에 인자로 설정값을 건네 타이머 초기화를 수행한다.</li></ul><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">typedef</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">timer_alarm_t</span><span class="token plain"> alarm_en</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">/*!&lt; Timer alarm enable */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">timer_start_t</span><span class="token plain"> counter_en</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">/*!&lt; Counter enable */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">timer_intr_mode_t</span><span class="token plain"> intr_type</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/*!&lt; Interrupt mode */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">timer_count_dir_t</span><span class="token plain"> counter_dir</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">/*!&lt; Counter direction  */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">timer_autoreload_t</span><span class="token plain"> auto_reload</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/*!&lt; Timer auto-reload */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token class-name">uint32_t</span><span class="token plain"> divider</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic">/*!&lt; Counter clock divider. The divider&#x27;s range is from from 2 to 65536. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">if</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property expression" style="color:#36acaa">SOC_TIMER_GROUP_SUPPORT_XTAL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">timer_src_clk_t</span><span class="token plain"> clk_src</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/*!&lt; Use XTAL as source clock. */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">endif</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token class-name">timer_config_t</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">timer_config_t</span><span class="token plain"> config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">divider </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TIMER_DIVIDER</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">counter_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TIMER_COUNT_UP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">counter_en </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TIMER_PAUSE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">alarm_en </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TIMER_ALARM_EN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">auto_reload </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> auto_reload</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// default clock source is APB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">timer_init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">group</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Counter Value 설정</summary><div><div class="collapsibleContent_i85q"><p>초기화 후 다음과 같이 타아머카운트 시작값을 설정하며, auto_reload값이 설정되어 있으면 overflow 발생 후 auto_reload로 값애 재설정되고, 그렇치 않을 경우 최초 타이머카운트 시작값으로 다시 카운트를 시작한다.</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">timer_set_counter_value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">group</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>timer alarm 설정 및 timer enable</summary><div><div class="collapsibleContent_i85q"><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">timer_set_alarm_value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">group</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timer_interval_sec </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> TIMER_SCALE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">timer_enable_intr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">group</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>콜백함수 등록 후 타이머 시작</summary><div><div class="collapsibleContent_i85q"><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token class-name">example_timer_info_t</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">timer_info </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">calloc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">example_timer_info_t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">timer_info</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">timer_group </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> group</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">timer_info</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">timer_idx </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> timer</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">timer_info</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">auto_reload </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> auto_reload</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">timer_info</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">alarm_interval </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> timer_interval_sec</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">timer_isr_callback_add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">group</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timer_group_isr_callback</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timer_info</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">timer_start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">group</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> timer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><h4 class="anchor anchorWithStickyNavbar_LWe7" id="예제확인-4">예제확인<a class="hash-link" href="#예제확인-4" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="timer_group-1">timer_group<a class="hash-link" href="#timer_group-1" title="Direct link to heading">​</a></h5><ol><li>타이머 설정 및 콜백함수를 등록하여 타이머를 시작</li><li>타이머인터럽트에 의해 콜백함수가 호출되면 큐버퍼에 메시지 전송</li><li>main의 while()문에서 메시지 수신을 대기하고 있다가 메시지를 수신하면 타이머카운트 값, 인터럽트가 발생된 타이머 그룹, 타이머 정보 printf</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fw_uart">FW_UART<a class="hash-link" href="#fw_uart" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="uart구성"><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/uart.html" target="_blank" rel="noopener noreferrer">UART구성</a><a class="hash-link" href="#uart구성" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="기능-3">기능<a class="hash-link" href="#기능-3" title="Direct link to heading">​</a></h5><ul><li>ESP32는 3개(UART0, UART1, UART2)의 UART Controller를 가지고 있고,</li><li>이중 UART0은 모니터링용으로, UART2는 타겟 MCU와의 데이터 송/수신을 위해 사용한다.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="인터페이스-4">인터페이스<a class="hash-link" href="#인터페이스-4" title="Direct link to heading">​</a></h5><p><a href="https://www.devicemart.co.kr/goods/view?no=1324910" target="_blank" rel="noopener noreferrer"><code>CP2102 USB to TTL 컨버터</code>(디바이스마트, 2750원 판매)</a>를 통해 타겟 MCU와 통신을 수행한다.</p><ul><li>UART0<ul><li>RX0(GPIO3), TX0(GPIO1)</li><li>Onboard 되어있는 usb to uart chip(CP2102N)에 연결되어 usb를 통해 가상 시리얼 포트로 사용되며, 주로 콘솔 모니터링을 위해 사용한다.</li></ul></li><li>UART2<ul><li>RX2(GPIO5), TX2(GPIO4)</li><li>제어기와 연결되어 블루투스를 통해 수신한 정보를 제어기로 전달하기 위해 사용한다.</li></ul></li><li>USB to UART 컨버터<ul><li><a href="https://www.waveshare.com/wiki/FT232_USB_UART_Board_(mini)" target="_blank" rel="noopener noreferrer">FT232 USB UART Board (mini)</a><ul><li><a href="https://www.eleparts.co.kr/goods/view?no=2305017" target="_blank" rel="noopener noreferrer">엘레파츠 6600원 판매</a></li><li><a href="https://www.waveshare.com/wiki/File:FT232-Driver.7z" target="_blank" rel="noopener noreferrer">드라이버 다운로드</a></li><li><a href="https://www.waveshare.com/w/upload/f/f4/FT232-USB-UART-Board-Schematic.pdf" target="_blank" rel="noopener noreferrer">Board Schematic</a></li><li><a href="https://www.waveshare.com/w/upload/b/b5/FT232R.pdf" target="_blank" rel="noopener noreferrer">FT232RL CPU Datasheet</a></li></ul></li><li><del>CP2102 USB to TTL Uart Serial Converter</del><ul><li><a href="https://www.devicemart.co.kr/goods/view?no=1324910" target="_blank" rel="noopener noreferrer"><del>디바이스마트, 2750원 판매</del></a></li></ul></li><li>21.10.03 장치인식 문제<ul><li><code>CP2102 USB to TTL Uart Serial Converter</code>는 사용 안함 (사용하기에는 이게 더 편함)</li><li>기존에 사용했던 <code>FT232 USB UART Board (mini)</code> 사용함</li></ul></li></ul></li></ul><p align="center"><img loading="lazy" src="/webpage/assets/images/mbd_hw_fw_uart1_interface-9f6b41d5d808d467b11ce5310ead38e3.png" alt="Example banner" width="350" class="img_ev3q"><br><em>&lt;입/출력 포트 정의&gt;</em></p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="레지스터설정-4">레지스터설정<a class="hash-link" href="#레지스터설정-4" title="Direct link to heading">​</a></h5><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>파라미터 설정</summary><div><div class="collapsibleContent_i85q"><ul><li>uart_param_config() 함수를 1번 호출하여 한번에 설정하는 방법과,</li><li>uart_set_baudrate(), uart_set_word_length(), uart_set_parity() 등과 같이 각 단계를 각각의 함수를 호출하여 각각 설정하는 방법이 있으며,</li><li>여기서는 config() 함수를 이용하여 한번에 UART 파라미터를 설정한다.</li></ul><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token class-name">uart_port_t</span><span class="token plain"> uart_num </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> UART_NUM_2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">uart_config_t</span><span class="token plain"> uart_config </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">baud_rate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">115200</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">data_bits </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> UART_DATA_8_BITS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">parity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> UART_PARITY_DISABLE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stop_bits </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> UART_STOP_BITS_1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">flow_ctrl </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> UART_HW_FLOWCTRL_CTS_RTS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">rx_flow_ctrl_thresh </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">122</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ESP_ERROR_CHECK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">uart_param_config</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 설정함수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  uart_num</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// UART 0/1/2 중 하나</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">uart_config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// 설정 파라미터</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>UART pin 설정</summary><div><div class="collapsibleContent_i85q"><p>uart_set_pin() 함수를 이용하여 출력핀을 설정한다.</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ESP_ERROR_CHECK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">uart_set_pin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  UART_NUM_2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// UART2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// TX2 : GPIO4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// RX2 : GPIO5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token number" style="color:#36acaa">18</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic">// RTS: GPIO18</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token number" style="color:#36acaa">19</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">// CTS: GPIO19</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>드라이버 설정</summary><div><div class="collapsibleContent_i85q"><p>Rx/Tx ring buffer size, event queue handle을 설정한다.</p><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Setup UART buffered IO with event queue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> uart_buffer_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1024</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">QueueHandle_t uart_queue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Install UART driver using an event queue here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ESP_ERROR_CHECK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">uart_driver_install</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  UART_NUM_2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> uart_buffer_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  uart_buffer_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">uart_queue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>데이터 송신</summary><div><div class="collapsibleContent_i85q"><p>시리얼 통신은 각 UART controller의 Finite State Machine(FSM)에 의해 제어된다.</p><ul><li><code>uart_write_bytes()</code> 함수를 이용하여 Tx FIFO 버퍼에 데이터 write</li><li>Tx FIFO buffer에 free space가 있으면 ISR이 background에서 데이터를 Tx ring buffer에서 Tx FIFO로 전송한다.</li></ul><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Write data to UART.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> test_str </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;This is a test string.\n&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">uart_write_bytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uart_num</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">test_str</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">strlen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">test_str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>데이터 수신</summary><div><div class="collapsibleContent_i85q"><ul><li>UART 데이터를 수신하면 Rx FIFO buffer에 저장</li><li>uart_get_buffered_data_len() 함수를 이용하여 Rx FIFO에서 읽을 수 있는 byte 수 확인</li><li>uart_read_bytes() 함수를 이용하여 수신 데이터 읽기</li></ul><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Read data from UART.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token class-name">uart_port_t</span><span class="token plain"> uart_num </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> UART_NUM_2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">uint8_t</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">128</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> length </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ESP_ERROR_CHECK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">uart_get_buffered_data_len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uart_num</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">size_t</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">length </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">uart_read_bytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uart_num</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> length</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></details><h4 class="anchor anchorWithStickyNavbar_LWe7" id="예제확인-5">예제확인<a class="hash-link" href="#예제확인-5" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="uart_echo">uart_echo<a class="hash-link" href="#uart_echo" title="Direct link to heading">​</a></h5><p><a href="https://gitlab.com/private210/ewserver/-/blob/main/peripherals/esp32/uart_echo/main/uart_echo_example_main.c" target="_blank" rel="noopener noreferrer"><code>gitlab 로그인 -&gt; private repository -&gt; uart_echo_example_main.c</code></a></p><p>다음과 같이 console printf 및 loopback(GPIO4_Tx2, GPIO5_Rx2) 동작을 확인한다.</p><ol><li>Task 생성/시작 전 console printf</li><li>loopback task 생성</li><li>일정시간동안 패킷 수신 대기</li><li>수신된 패킷 송신</li></ol><h5 class="anchor anchorWithStickyNavbar_LWe7" id="uart_async_rxtxtasks">uart_async_rxtxtasks<a class="hash-link" href="#uart_async_rxtxtasks" title="Direct link to heading">​</a></h5><p><a href="https://gitlab.com/private210/ewserver/-/blob/main/peripherals/esp32/uart_async_rxtxtasks/main/uart_async_rxtxtasks_main.c" target="_blank" rel="noopener noreferrer"><code>gitlab 로그인 -&gt; private repository -&gt; uart_async_rxtxtasks_main.c</code></a></p><p>다음과 같이 console printf, GPIO4_Tx2, GPIO5_Rx2 동작을 확인한다.</p><ol><li>Task 생성/시작 전 console printf</li><li>rx_task, tx_task 생성</li><li>tx_task에서 주기적으로 &quot;Hello world\n&quot; 메시지 GPIO4_Tx2</li><li>rx_task에서 bytes 수신 시 log 출력</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="참고자료-9">참고자료<a class="hash-link" href="#참고자료-9" title="Direct link to heading">​</a></h4><ul><li>ESP32 ESP-IDF Programming Guide(2312p).pdf -&gt; 900p, 2.3.21 Universal Asynchronous Receiver/Transmitter (UART)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fw_wifi">FW_WIFI<a class="hash-link" href="#fw_wifi" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="기초이론-2">기초이론<a class="hash-link" href="#기초이론-2" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="기본개념">기본개념<a class="hash-link" href="#기본개념" title="Direct link to heading">​</a></h5><p>Bluetooth와는 다르게 Wifi를 통해 임베디드 웹서버를 구축하면 웹브라우저만 있으면 ESP32에 접속하는 Client에서 블루투스 앱과 같은 별도 프로그램 없이 GUI를 구현할 수 있다.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="wifi구성">WIFI구성<a class="hash-link" href="#wifi구성" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="인터페이스-5">인터페이스<a class="hash-link" href="#인터페이스-5" title="Direct link to heading">​</a></h5><h5 class="anchor anchorWithStickyNavbar_LWe7" id="레지스터설정-5">레지스터설정<a class="hash-link" href="#레지스터설정-5" title="Direct link to heading">​</a></h5><h4 class="anchor anchorWithStickyNavbar_LWe7" id="예제확인-6">예제확인<a class="hash-link" href="#예제확인-6" title="Direct link to heading">​</a></h4><h4 class="anchor anchorWithStickyNavbar_LWe7" id="참고자료-10">참고자료<a class="hash-link" href="#참고자료-10" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="wifi">wifi<a class="hash-link" href="#wifi" title="Direct link to heading">​</a></h5><ul><li><a href="https://docs.espressif.com/projects/esp-idf/en/stable/api-guides/wifi.html" target="_blank" rel="noopener noreferrer">wifi programming</a></li><li><a href="https://coyoteugly.tistory.com/148" target="_blank" rel="noopener noreferrer">ESP32 blufi(Bluetooth로 ip/pw등 연결설정하여 연결되면 wifi로 통신)</a></li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="아두이노-1">아두이노<a class="hash-link" href="#아두이노-1" title="Direct link to heading">​</a></h5><ul><li><a href="https://arsviator.blogspot.com/2018/07/esp32-websocket-server-on-esp32.html" target="_blank" rel="noopener noreferrer">아두이노 및 파이썬을 이용하여 ESP32에서 웹소켓 서버 실행</a></li><li><a href="https://arsviator.blogspot.com/2018/07/esp32-json.html" target="_blank" rel="noopener noreferrer">ESP32에서 JSON 파싱(for 실시간 웹페이지 업데이트)</a></li><li><a href="https://arsviator.blogspot.com/2018/11/esp32-static-ip-using-static-ip-address.html" target="_blank" rel="noopener noreferrer">ESP32에 static IP 사용하기</a></li><li><a href="https://www.electronicshub.org/esp32-servo-control/" target="_blank" rel="noopener noreferrer">ESP32’s Web page accessed using Chrome browser - 끝부분</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rtos_sync">RTOS_Sync<a class="hash-link" href="#rtos_sync" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="기본개념-1">기본개념<a class="hash-link" href="#기본개념-1" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="세마포어뮤텍스">세마포어/뮤텍스<a class="hash-link" href="#세마포어뮤텍스" title="Direct link to heading">​</a></h5><ul><li><a href="https://arsviator.blogspot.com/2018/07/esp32-freertos-message-queue.html" target="_blank" rel="noopener noreferrer">FreeRTOS Message Queue 사용</a></li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="큐">큐<a class="hash-link" href="#큐" title="Direct link to heading">​</a></h5><ol><li>boolean 크기를 갖는 데이터를 10개까지 저장할 수 있는 큐를 생성하고, </li><li>인터럽트 수신 즉시 큐에 데이터를 계속 밀어 넣고,</li><li>main에서 큐 데이터를 수신하여 사용한다.</li></ol><div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> bool toggleLED </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> xQueueHandle gpio_evt_queue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">uint8_t</span><span class="token plain"> trigger</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 큐에 있는 데이터를 저장할 변수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">uart_isr</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">패킷수신</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    toggleLED </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">toggleLED</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">xQueueSend</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gpio_evt_queue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">toggleLED</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">void</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gpio_evt_queue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">xQueueCreate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic">// 아이템 최대 개수</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">bool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 각 아이템의 크기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">while</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">xQueueReceive</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gpio_evt_queue</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">trigger</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> portMAX_DELAY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">gpio_set_level</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">GPIO_OUTPUT_IO_0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> trigger</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;# [gpio_task] gpio out: %d\n&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> trigger</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="태스크-동기화">태스크 동기화<a class="hash-link" href="#태스크-동기화" title="Direct link to heading">​</a></h5><h4 class="anchor anchorWithStickyNavbar_LWe7" id="참고자료-11">참고자료<a class="hash-link" href="#참고자료-11" title="Direct link to heading">​</a></h4><ul><li><a href="https://docs.aws.amazon.com/ko_kr/freertos/latest/userguide/freertos-ug.pdf" target="_blank" rel="noopener noreferrer">freertos-user guide for aws</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rtos_task">RTOS_Task<a class="hash-link" href="#rtos_task" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="태스크-생성">태스크 생성<a class="hash-link" href="#태스크-생성" title="Direct link to heading">​</a></h4><ul><li>FreeRTOS 기반 태스크 생성 시 <a href="https://arsviator.blogspot.com/2019/04/esp32-use-multicore-on-esp32.html" target="_blank" rel="noopener noreferrer">우선순위, 코어를 선태갛여 태스크를 생성</a>할 수 있다.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="우선순위-설정">우선순위 설정<a class="hash-link" href="#우선순위-설정" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="freertos">FreeRTOS<a class="hash-link" href="#freertos" title="Direct link to heading">​</a></h5><ul><li><a href="https://slowbootkernelhacks.blogspot.com/2020/12/esp32-freertos.html" target="_blank" rel="noopener noreferrer">ESP32로 알아보는 FreeRTOS</a></li><li><a href="https://github.com/aws/amazon-freertos" target="_blank" rel="noopener noreferrer">Amazon FreeRTOS for AWS Cloud</a></li><li><a href="https://velog.io/@embeddedjune/FreeRTOS-%EC%A0%95%EB%A6%AC-%E5%AE%8C.-%EC%B4%9D%EC%A7%91%EB%B3%B8" target="_blank" rel="noopener noreferrer">FreeRTOS 정리 - good</a></li><li><a href="https://velog.io/@embeddedjune/FreeRTOS-%EC%A0%95%EB%A6%AC-1.-FreeRTOS%EC%99%80-Task" target="_blank" rel="noopener noreferrer">FreeRTOS 정리 1. FreeRTOS와 Task</a></li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="mbed">mbed<a class="hash-link" href="#mbed" title="Direct link to heading">​</a></h5><ul><li><a href="https://gcamp.tistory.com/tag/arm_mbed_rtos" target="_blank" rel="noopener noreferrer">MBED OS(RTOS 포함) 워크숍</a><ul><li><a href="https://www.youtube.com/watch?v=pu8pM536uks&amp;t=5025s" target="_blank" rel="noopener noreferrer">MBED OS(RTOS 포함) 워크숍 1일</a></li><li><a href="https://www.youtube.com/watch?v=IrZLFODeFoM" target="_blank" rel="noopener noreferrer">MBED OS(RTOS 포함) 워크숍 2일</a></li><li><a href="https://www.youtube.com/watch?v=BH4AFFJqh_Q" target="_blank" rel="noopener noreferrer">MBED OS(RTOS 포함) 워크숍 3일</a></li><li><a href="https://www.youtube.com/watch?v=QPpxXiEKAMI" target="_blank" rel="noopener noreferrer">MBED OS(RTOS 포함) 워크숍 4일</a></li><li><a href="https://www.youtube.com/watch?v=KFSLiFLvuO4" target="_blank" rel="noopener noreferrer">MBED OS(RTOS 포함) 워크숍 5일</a></li></ul></li><li><a href="https://gcamp.tistory.com/tag/arm_mbed?page=3" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics</a><ul><li><a href="https://gcamp.tistory.com/1523" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 01강</a></li><li><a href="https://gcamp.tistory.com/1523" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 02강 디바이스 연결</a></li><li><a href="https://gcamp.tistory.com/1524" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 03강</a></li><li><a href="https://gcamp.tistory.com/1525" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 04강 프로그램 기본 구조</a></li><li><a href="https://gcamp.tistory.com/1526" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 05강 디지털 출력</a></li><li><a href="https://gcamp.tistory.com/1527" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 06강 디지털 입력</a></li><li><a href="https://gcamp.tistory.com/1528" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 07강 PwmOut</a></li><li><a href="https://gcamp.tistory.com/1529" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 08강 아날로그 출력AnalogOut</a></li><li><a href="https://gcamp.tistory.com/1530" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 09강 아날로그 입력 AnalogIn</a></li><li><a href="https://gcamp.tistory.com/1531" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 10강 BusOut</a></li><li><a href="https://gcamp.tistory.com/1532" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 11강 BusIn</a></li><li><a href="https://gcamp.tistory.com/1533" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 12강 토양수분센서</a></li><li><a href="https://gcamp.tistory.com/1534" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 13강 적외선인체감지센서PIR</a></li><li><a href="https://gcamp.tistory.com/1535" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 14강 조도센서CDS</a></li><li><a href="https://gcamp.tistory.com/1536" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 15강 가스센서 불꽃감지센서</a></li><li><a href="https://gcamp.tistory.com/1537" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 16강 거리측정센서</a></li><li><a href="https://gcamp.tistory.com/1538" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 17강 온습도센서</a></li><li><a href="https://gcamp.tistory.com/1539" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 18강 피에조부저</a></li><li><a href="https://gcamp.tistory.com/1540" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 19강 릴레이</a></li><li><a href="https://gcamp.tistory.com/1541" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 20강 진동센서와모터, IR장애물센서</a></li><li><a href="https://gcamp.tistory.com/1542" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 21강 UARTBoardToPc 통신</a></li><li><a href="https://gcamp.tistory.com/1543" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 22강 UARTBoardToBoard 통신</a></li><li><a href="https://gcamp.tistory.com/1544" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 23강 I2C LCD활용 통신</a></li><li><a href="https://gcamp.tistory.com/1545" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 24강 I2C OLED활용 통신</a></li><li><a href="https://gcamp.tistory.com/1546" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 25강 SPI LCD활용 통신</a></li><li><a href="https://gcamp.tistory.com/1547" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 26강 SPI LCD활용 통신</a></li><li><a href="https://gcamp.tistory.com/1548" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 27강 7Segment1digit 사용하기</a></li><li><a href="https://gcamp.tistory.com/1549" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 28강 7Segment4digit 사용하기</a></li><li><a href="https://gcamp.tistory.com/1550" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 29강 LED Matrix8X8사용하기</a></li><li><a href="https://gcamp.tistory.com/1551" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 30강 RTC(DS1302)사용하기</a></li><li><a href="https://gcamp.tistory.com/1552" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 31강 인터럽트Interrupt</a></li><li><a href="https://gcamp.tistory.com/1553" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 32강 반복실행Ticker</a></li><li><a href="https://gcamp.tistory.com/1554" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 33강 시간 측정 Timer</a></li><li><a href="https://gcamp.tistory.com/1555" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 34강 시간 종료Timeout</a></li><li><a href="https://gcamp.tistory.com/1556" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 35강 서보Servo모터</a></li><li><a href="https://gcamp.tistory.com/1557" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 36강 스테핑Stepping모터</a></li><li><a href="https://gcamp.tistory.com/1558" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 37강 DC모터</a></li><li><a href="https://gcamp.tistory.com/1559" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 38강 OnBoardSensor L475</a></li><li><a href="https://gcamp.tistory.com/1560" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 39강 스레드</a></li><li><a href="https://gcamp.tistory.com/1561" target="_blank" rel="noopener noreferrer">Arm MBED Programming Basics 40강 스레드 통신</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="소프트웨어">소프트웨어<a class="hash-link" href="#소프트웨어" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="application-logic">Application Logic<a class="hash-link" href="#application-logic" title="Direct link to heading">​</a></h3><p>T.B.D</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="function-block">Function Block<a class="hash-link" href="#function-block" title="Direct link to heading">​</a></h4><h4 class="anchor anchorWithStickyNavbar_LWe7" id="참고자료-12">참고자료<a class="hash-link" href="#참고자료-12" title="Direct link to heading">​</a></h4><ul><li><a href="https://iotassistant.io/esp32/smart-door-bell-noise-meter-using-fft-esp32/" target="_blank" rel="noopener noreferrer">Smart door bell and noise meter using FFT on ESP32</a></li><li>esp32 예제소스<ul><li><a href="https://github.com/sglee0223/esp32" target="_blank" rel="noopener noreferrer">esp32 github 예제소스 by sglee0223</a></li></ul></li><li><a href="https://docs.espressif.com/projects/espressif-esp-iot-solution/en/latest/" target="_blank" rel="noopener noreferrer">ESP-IoT-Solution Programming Guide</a><ul><li><a href="https://docs.espressif.com/projects/espressif-esp-iot-solution/en/latest/sensors/imu.html#adapted-products" target="_blank" rel="noopener noreferrer">관성 측정 장치(IMU) - MPU6050</a></li></ul></li><li>안드로이드 스튜디오 - 블루투스</li><li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/get-started/index.html#get-esp-idf" target="_blank" rel="noopener noreferrer">ESP-IDF 설치</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/main/website/docs/3_sideprj/3_hybridprj/a_esp32.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/webpage/docs/sideprj/window/window_verify"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">검증</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/webpage/docs/sideprj/hybridprj/linux"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">임베디드 리눅스</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#개요" class="table-of-contents__link toc-highlight">개요</a></li><li><a href="#지원" class="table-of-contents__link toc-highlight">지원</a><ul><li><a href="#프로젝트-관리" class="table-of-contents__link toc-highlight">프로젝트 관리</a></li><li><a href="#개발환경" class="table-of-contents__link toc-highlight">개발환경</a></li><li><a href="#코딩룰" class="table-of-contents__link toc-highlight">코딩룰</a></li></ul></li><li><a href="#시스템" class="table-of-contents__link toc-highlight">시스템</a><ul><li><a href="#요구사항" class="table-of-contents__link toc-highlight">요구사항</a></li><li><a href="#기능-요구사항" class="table-of-contents__link toc-highlight">기능 요구사항</a></li><li><a href="#아키텍처" class="table-of-contents__link toc-highlight">아키텍처</a></li><li><a href="#f1-무선통신" class="table-of-contents__link toc-highlight">F1 무선통신</a></li><li><a href="#f2-무선업데이트" class="table-of-contents__link toc-highlight">F2 무선업데이트</a></li><li><a href="#f3-모니터링" class="table-of-contents__link toc-highlight">F3 모니터링</a></li></ul></li><li><a href="#하드웨어" class="table-of-contents__link toc-highlight">하드웨어</a><ul><li><a href="#블루투스" class="table-of-contents__link toc-highlight">블루투스</a></li><li><a href="#mcu" class="table-of-contents__link toc-highlight">MCU</a></li><li><a href="#fw_ble" class="table-of-contents__link toc-highlight">FW_BLE</a></li><li><a href="#fw_ble_uart" class="table-of-contents__link toc-highlight">FW_BLE_UART</a></li><li><a href="#fw_can" class="table-of-contents__link toc-highlight">FW_CAN</a></li><li><a href="#fw_gpio" class="table-of-contents__link toc-highlight">FW_GPIO</a></li><li><a href="#fw_timer" class="table-of-contents__link toc-highlight">FW_TIMER</a></li><li><a href="#fw_uart" class="table-of-contents__link toc-highlight">FW_UART</a></li><li><a href="#fw_wifi" class="table-of-contents__link toc-highlight">FW_WIFI</a></li><li><a href="#rtos_sync" class="table-of-contents__link toc-highlight">RTOS_Sync</a></li><li><a href="#rtos_task" class="table-of-contents__link toc-highlight">RTOS_Task</a></li></ul></li><li><a href="#소프트웨어" class="table-of-contents__link toc-highlight">소프트웨어</a><ul><li><a href="#application-logic" class="table-of-contents__link toc-highlight">Application Logic</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/webpage/docs/mycareer">주요경험</a></li><li class="footer__item"><a class="footer__link-item" href="/webpage/docs/introduce">자기소개</a></li><li class="footer__item"><a class="footer__link-item" href="/webpage/docs/sideprj">사이드프로젝트</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/webpage/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/chuldongshim/webpage" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/webpage/assets/js/runtime~main.64c01107.js"></script>
<script src="/webpage/assets/js/main.bfa071de.js"></script>
</body>
</html>